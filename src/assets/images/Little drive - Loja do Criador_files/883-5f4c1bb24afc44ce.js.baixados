!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="9c280604-630b-4491-9326-5057263c94d3",e._sentryDebugIdIdentifier="sentry-dbid-9c280604-630b-4491-9326-5057263c94d3")}catch(e){}}();"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[883],{63416:function(e,t,n){n.d(t,{Z:function(){return eg}});var a=n(85893),i=n(67294),s=n(39977),o=n(44579),l=n(76172),r=n(8365),d=n(63507),c=n(67848),u=n(57417),p=n(26170);let h=(0,p.Z)()(e=>({container:{[e.breakpoints.down("XLarge")]:{padding:"0 12px"},[e.breakpoints.down(u.wt)]:{padding:"0"}},horizontalDivider:{[e.breakpoints.up("XSmall")]:{margin:"40px 0"},[e.breakpoints.down(u.wt)]:{margin:"20px 0"}},header:{justifyContent:"space-between"}}));var m=n(61555),v=n(8537),g=n(57140),x=n(41664),b=n.n(x),w=n(11163),f=n(76603),C=n(65016),y=n(74279),j=n(34420),Z=n(60553);let k=(0,p.Z)()(e=>({assetName:{overflowWrap:"break-word",width:"100%",[e.breakpoints.down(u.wt)]:{"&":{display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:2},display:"box",marginRight:16,overflow:"hidden"}},compactDetailsBottomRow:{marginTop:4},headingColumn:{[e.breakpoints.up(u.wt)]:{marginRight:40,maxWidth:"60%"},[e.breakpoints.down(u.wt)]:{marginBottom:u.Wk,width:"100%"}},headingDetails:{[e.breakpoints.up(u.wt)]:{gap:0,width:"auto"}},reviewsIcon:{marginRight:8,paddingTop:"auto"},reviewsLink:{"&:hover":{textDecoration:"none"},color:e.palette.content.muted,marginRight:8},verticalDivider:{backgroundColor:e.palette.content.muted,height:"auto",margin:"4px 20px 4px 22px"}}));var I=n(70554),T=e=>{let{assetId:t,assetName:n,creatingUniverseName:r,creator:d,voting:c,reviewsCount:p,handleClickSeeMoreReviews:h,rootPlaceId:x}=e,T=(0,w.useRouter)(),{frontendFlags:R}=(0,j.YV)(),{classes:S}=k(),{translate:N}=(0,y.$G)(),{isWebViewAvailable:L}=(0,Z.ZF)(),D=!L,M=!L&&(null==c?void 0:c.showVotes),U=d&&M,F=T.asPath.split("?")[0],B=-1===F.lastIndexOf("/reviews")?F:F.substring(0,F.lastIndexOf("/reviews"));return(0,s.Z)(e=>e.breakpoints.down(u.wt))?(0,a.jsxs)(o.Z,{className:S.headingColumn,container:!0,"data-testid":"assetHeadingDetailsTestId",direction:"column",children:[(0,a.jsxs)(o.Z,{alignItems:"center",container:!0,direction:"row",justifyContent:"space-between",wrap:"nowrap",children:[(0,a.jsx)(m.Z,{className:S.assetName,component:"h2",variant:"h5",children:(0,a.jsx)(b(),{href:B,children:n})}),M&&(0,a.jsx)(C.Z,{showRatingsCount:!0,voting:c})]}),(0,a.jsxs)(o.Z,{alignItems:"center",container:!0,className:S.compactDetailsBottomRow,direction:"row",justifyContent:"space-between",wrap:"nowrap",children:[d&&(0,a.jsx)(f.Z,{assetId:t,creatingUniverseName:r,creator:d,displayAsAuthor:!0,iconSize:"medium",rootPlaceId:x,variant:L?"captionBody":"body1",color:L?"info":"inherit"}),D&&(0,a.jsx)(I.Z,{assetId:t})]})]}):(0,a.jsxs)(o.Z,{className:S.headingColumn,container:!0,direction:"column","data-testid":"assetHeadingDetailsTestId",children:[(0,a.jsx)(m.Z,{component:"h1",variant:"h1",className:S.assetName,children:(0,a.jsx)(b(),{href:B,children:n})}),(0,a.jsxs)(o.Z,{container:!0,direction:"row",flexWrap:"nowrap",className:S.headingDetails,children:[d&&(0,a.jsx)(f.Z,{creator:d,creatingUniverseName:r,displayAsAuthor:!0,variant:"body1",iconSize:"medium",assetId:t,rootPlaceId:x}),U&&(0,a.jsx)(l.Z,{orientation:"vertical",className:S.verticalDivider}),M&&(0,a.jsxs)(i.Fragment,{children:[(0,a.jsx)(C.Z,{voting:c,isMediumSize:!0}),(0,a.jsxs)(v.Z,{"data-testid":"reviewsCountTestId",onClick:h,className:S.reviewsLink,children:[(0,a.jsx)(g.hyJ,{fontSize:"small",className:S.reviewsIcon}),(0,a.jsx)(m.Z,{children:N("Label.ReviewsCount",{reviewsCount:p.toString()})})]})]}),D&&(0,a.jsx)(I.Z,{assetId:t})]})]})},R=n(69057),S=n(24176),N=n(59252),L=n(99054),D=n(63411),M=n(97909),U=n(11207),F=n(89306),B=n(11049),A=n(3508),P=n(52155),E=n(93019),V=n(19118),W=n(88049),z=n(35475),H=n(82013),G=n(86879),_=n(30875),O=e=>{let{assetId:t,open:n,setOpen:s,setErrorMessage:o,setIsValid:l,setShowDeleteSnackbar:r}=e,{translate:d}=(0,y.$G)(),c=(0,_.cq)(),u=(0,i.useCallback)(()=>{s(!1)},[s]),p=(0,i.useCallback)(async()=>{await c(t)?(o(null),l(!0)):(l(!1),o(d("Error.UnexpectedError"))),r(!0),u()},[t,u,o,l,r,d,c]);return(0,a.jsxs)(V.Z,{open:n,onClose:u,"data-testid":"deleteFromInventoryDialog",children:[(0,a.jsx)(W.Z,{children:d("Heading.DeleteItem")}),(0,a.jsx)(z.Z,{dividers:!0,children:(0,a.jsx)(H.D,{children:d("Label.ConfirmDelete")})}),(0,a.jsxs)(G.Z,{children:[(0,a.jsx)(v.Z,{variant:"outlined",color:"primary",onClick:u,"data-testid":"cancelButton",children:d("Action.NoCancel")}),(0,a.jsx)(v.Z,{variant:"contained",onClick:p,"data-testid":"deleteButton",children:d("Action.YesDelete")})]})]})},$=n(39853),Y=n(23887),K=n(86510),q=n(23620),X=n(3153),Q=e=>{let t,{assetName:n,errorMessage:s,isValid:o,showDeleteSnackbar:l,setShowDeleteSnackbar:r}=e,{translate:d}=(0,y.$G)(),c=(0,i.useCallback)(()=>r(!1),[r]);if(o){let e="string"==typeof n?n:d("Label.Item");t=d("Message.SuccessfulDeletion",{assetName:e})}else t=s;return(0,a.jsx)(q.S,{autoHide:!0,anchorOrigin:{horizontal:"center",vertical:"top"},open:l,onClose:c,children:(0,a.jsx)(X.A,{variant:"filled",severity:o?"success":"error",children:t})})},J=n(88643),ee=n(53316);let et=()=>new Set([ee.a9.Plugin]);var en=n(63545);let ea=(0,p.Z)()((e,t)=>{let{isWebViewAvailable:n}=t;return{dropdownButton:{...n?{height:30,marginLeft:0,marginRight:8,minHeight:0,paddingBottom:5,paddingTop:5}:{marginLeft:8,marginRight:0}},dropdownIconButton:{marginRight:12,...n&&{height:30,minHeight:0,paddingBottom:5,paddingTop:5}},menu:{marginTop:8,minWidth:240,...n&&{marginTop:0,minWidth:0}}}});var ei=e=>{var t,n,o;let{asset:l,creator:r,fiatProduct:d,showDeleteSnackbar:c,setShowDeleteSnackbar:p}=e,h=null!==(t=null==l?void 0:l.id)&&void 0!==t?t:0,m=null==l?void 0:l.typeId,x=null==l?void 0:l.meshId,w=null==l?void 0:l.textureId,{translate:f}=(0,y.$G)(),{currentUrlWithBasePath:C}=(0,en.bX)(),{hasEditPermission:j}=(0,K.l9)(h),{isOwned:k}=(0,_.m6)(h),{user:I,login:T}=(0,J.je)(),V=et(),{isWebViewAvailable:W}=(0,Z.ZF)(),{classes:z}=ea({isWebViewAvailable:W}),{sendEvent:H}=(0,$.Z)(),[G,q]=(0,i.useState)(!1),[X,ee]=(0,i.useState)(null),[ei,es]=(0,i.useState)(null),[eo,el]=(0,i.useState)(null),er=(0,s.Z)(e=>e.breakpoints.down(u.wt)),ed=(null==r?void 0:r.id)===U.FQ&&(null==r?void 0:r.type)===D.xq.User,ec=k&&!ed&&!(0,F.Z)(d),eu=void 0!==h&&!ed,ep=k&&V.has(m),eh="".concat((0,M.KA)(),"/store").concat((0,B.Z)(h,null!==(n=null==l?void 0:l.name)&&void 0!==n?n:"")),em="".concat((0,M.KA)(),"/dashboard/creations/store/").concat(h,"/configure"),ev=(0,A.Z)(h,C),eg=(0,i.useRef)(ev),ex=(0,P.Z)({targetId:h.toString()});(0,i.useEffect)(()=>{(async()=>{let{EnableCreatorHubMarketplace:e}=await (0,E.Z)();e&&(eg.current=ex)})()},[ex,h,null==I?void 0:I.id]);let eb="".concat((0,M.KA)(),"/dashboard/transactions?paymentType=").concat(j?"IncomingPayments":"OutgoingPayments"),ew=(0,i.useCallback)(e=>{H(Y.B_.AssetMenuItemClicked,{assetId:h,assetTypeId:m,menuItem:e,menuSource:Y.hc.ItemDetailsDropdown})},[h,m,H]),ef=(0,i.useCallback)(()=>{navigator.clipboard.writeText(eh),ew(Y.gR.CopyLink),ee(null)},[eh,ew]),eC=(0,i.useCallback)(e=>{navigator.clipboard.writeText(e.toString()),ee(null)},[]);return l?(0,a.jsxs)(i.Fragment,{children:[er?(0,a.jsx)(v.Z,{"aria-label":"More options",color:"secondary",className:z.dropdownButton,"data-testid":"dropdownButton",onClick:e=>ee(e.currentTarget),size:"medium",variant:"contained",children:(0,a.jsx)(g.E0C,{})}):(0,a.jsx)(R.Z,{"aria-label":"More options",className:z.dropdownIconButton,color:"secondary","data-testid":"dropdownButton",onClick:e=>ee(e.currentTarget),size:"large",children:(0,a.jsx)(g.E0C,{})}),(0,a.jsx)(S.N,{children:(0,a.jsxs)(N.Z,{variant:"menu",anchorEl:X,anchorOrigin:{horizontal:"right",vertical:"bottom"},transformOrigin:{horizontal:"right",vertical:"top"},open:!!X,onClose:()=>ee(null),classes:{paper:z.menu},children:[(0,a.jsx)(L.Z,{onClick:ef,children:f("Label.CopyAssetLink")}),(0,a.jsx)(L.Z,{onClick:()=>{eC(h),ew(Y.gR.CopyAssetId)},children:f("Label.CopyAssetId")}),x&&(0,a.jsx)(L.Z,{onClick:()=>{eC(x),ew(Y.gR.CopyMeshId)},children:f("Label.CopyMeshId")}),w&&(0,a.jsx)(L.Z,{onClick:()=>{eC(w),ew(Y.gR.CopyTextureId)},children:f("Label.CopyTextureId")}),ep&&(0,a.jsx)(b(),{href:eb,onClick:()=>ew(Y.gR.ViewInTransactions),passHref:!0,children:(0,a.jsx)(L.Z,{children:f("Label.ViewInTransactions")})}),j&&(0,a.jsx)(b(),{href:em,onClick:()=>ew(Y.gR.Configure),passHref:!0,children:(0,a.jsx)(L.Z,{children:f("Label.ConfigureAsset")})}),ec&&(0,a.jsx)(L.Z,{onClick:()=>{q(!0),ew(Y.gR.DeleteFromInventory),ee(null)},children:f("Label.DeleteFromInventory")}),eu&&(I?(0,a.jsx)(b(),{href:eg.current,onClick:()=>ew(Y.gR.Report),passHref:!0,children:(0,a.jsx)(L.Z,{children:f("Label.ReportItem")})}):(0,a.jsx)(L.Z,{onClick:()=>{T()},children:f("Label.ReportItem")}))]})}),(0,a.jsx)(O,{assetId:h,open:G,setOpen:q,setErrorMessage:el,setIsValid:es,setShowDeleteSnackbar:p}),(0,a.jsx)(Q,{assetName:null!==(o=null==l?void 0:l.name)&&void 0!==o?o:"",errorMessage:eo,isValid:ei,showDeleteSnackbar:c,setShowDeleteSnackbar:p})]}):null},es=n(42583),eo=n(92544),el=n(73694);let er=(0,p.Z)()(e=>({tryInRobloxButton:{marginRight:12,whiteSpace:"nowrap",[e.breakpoints.down(u.wt)]:{marginLeft:12,marginRight:4,width:"100%"}}}));var ed=e=>{let{asset:t}=e,{classes:n}=er(),{translate:o}=(0,y.$G)(),{sendEvent:l}=(0,$.Z)(),{assetId:r,isTryInRobloxEnabled:d,socialLinks:c}=(0,el.Z)(null!=t?t:null),p=c.find(e=>e.linkType===eo.Un.TryInExperience),h=null==p?void 0:p.url,m=(0,s.Z)(e=>e.breakpoints.down(u.wt)),g=(0,i.useMemo)(()=>{if(!p||!h)return null;let e=JSON.stringify({creatorStoreAssetId:r});return"roblox://placeId=".concat(encodeURIComponent(h),"&launchData=").concat(encodeURIComponent(e))},[r,h,p]);return d&&g?(0,a.jsx)(v.Z,{color:"secondary","data-testid":"tryInRobloxButton",variant:"contained",className:n.tryInRobloxButton,onClick:e=>{e.preventDefault(),window.open(g,"_blank"),l(Y.B_.TryInRobloxClicked,{assetId:r,placeId:Number(h)})},size:m?"medium":"large",children:o("Action.TryInRoblox")}):null},ec=n(59995),eu=n(73461);let ep=(0,p.Z)()((e,t)=>{let{isWebViewAvailable:n}=t;return{headingButtonRow:{[e.breakpoints.up(u.wt)]:{width:"auto"},[e.breakpoints.down(u.wt)]:{flexDirection:"row-reverse",...n&&{backgroundColor:e.palette.background.default,bottom:0,flexDirection:"row",left:0,padding:"12px 20px",position:"fixed",width:"calc(100% - var(--scrollbar-width))",zIndex:e.zIndex.speedDial+1}}},headingColumn:{[e.breakpoints.up(u.wt)]:{width:"auto"},[e.breakpoints.down(u.wt)]:{margin:"".concat(u.Wk,"px 0"),...n&&{margin:8}}}}});var eh=n(76801),em=e=>{var t,n;let{asset:s,asyncPurchaseSuccess:l,creator:r,hasScripts:d,keyword:c,pageNumber:u,pagePosition:p,toolboxFiatProduct:h}=e,m=null!==(t=null==s?void 0:s.id)&&void 0!==t?t:0,v=null!==(n=null==s?void 0:s.name)&&void 0!==n?n:"",g=null==s?void 0:s.typeId,{isWebViewAvailable:x}=(0,Z.ZF)(),{classes:b}=ep({isWebViewAvailable:x}),{user:w}=(0,J.je)(),{getProduct:f}=(0,eu.AM)(),{data:C,isLoading:y,isFetching:j}=(0,ec.KO)(m,g,(null==w?void 0:w.id)!==void 0,h,f,!0),[k,I]=(0,i.useState)(!1);return(0,a.jsxs)(o.Z,{alignItems:"flex-end",className:b.headingColumn,container:!0,"data-testid":"assetButtonsTestId",direction:"column",children:[(0,a.jsxs)(o.Z,{container:!0,alignItems:"center",direction:"row",justifyContent:"space-between",className:b.headingButtonRow,wrap:"nowrap",children:[(0,a.jsx)(ei,{asset:s,creator:r,fiatProduct:null!=C?C:null,showDeleteSnackbar:k,setShowDeleteSnackbar:I}),(0,a.jsx)(ed,{asset:s}),(0,a.jsx)(es.ZP,{assetId:m,assetName:v,assetSubTypes:s.assetSubTypes||null,assetTypeId:g,asyncPurchaseSuccess:l,creator:r,fiatProduct:C,hasScripts:d,isFiatProductLoading:y||j,pageNumber:u,pagePosition:p,keyword:c})]}),!x&&(0,a.jsx)(eh.Z,{asset:s,creator:r,toolboxFiatProduct:h})]})},ev=n(16678),eg=e=>{let{assetDetails:t,reviewsCount:n,breadcrumbs:i,keyword:p,pageNumber:m,pagePosition:v,asyncPurchaseSuccess:g,handleClickSeeMoreReviews:x}=e,{asset:b,creator:w,fiatProduct:f,voting:C}=t,{classes:y}=h(),{getUniverseById:j}=(0,d.lO)(),Z=(0,s.Z)(e=>e.breakpoints.down(u.wt));if(null==b)return null;let{data:k}=(0,c.a)([b.creatingUniverseId],async()=>b.creatingUniverseId?j(b.creatingUniverseId):null);return(0,a.jsxs)(o.Z,{container:!0,direction:"column",className:y.container,children:[i&&(0,a.jsx)(r.Z,{breadcrumbs:i}),(0,a.jsx)(o.Z,{container:!0,alignItems:"center",justifyContent:"space-between",direction:"row",wrap:Z?"wrap":"nowrap",children:b.id&&(0,a.jsxs)(o.Z,{container:!0,className:y.header,justifyContent:"space-between",children:[(0,a.jsx)(T,{assetId:b.id,assetName:b.name,creatingUniverseName:k?k.name:null,creator:w,voting:C,reviewsCount:n,handleClickSeeMoreReviews:x,rootPlaceId:k?k.rootPlaceId:null}),Z&&(0,a.jsx)(ev.Z,{asset:b,creator:w}),(0,a.jsx)(em,{asset:b,asyncPurchaseSuccess:g,creator:w,hasScripts:b.hasScripts,keyword:p,pageNumber:m,pagePosition:v,toolboxFiatProduct:null!=f?f:null})]})}),!Z&&(0,a.jsx)(l.Z,{orientation:"horizontal",variant:"fullWidth",className:y.horizontalDivider})]})}},76801:function(e,t,n){n.d(t,{Z:function(){return C}});var a=n(85893);n(67294);var i=n(39977),s=n(57140),o=n(44579),l=n(61555),r=n(74279),d=n(30875),c=n(42913),u=n(59995),p=n(78340),h=n(89306),m=n(37483),v=n(98107),g=n(57417),x=n(60553),b=n(88643),w=n(73461);let f=(0,n(26170).Z)()(e=>({availableInInventoryContainer:{marginTop:8,[e.breakpoints.down(g.wt)]:{marginTop:g.Wk}},checkIcon:{marginRight:8},errorLinkText:{"&:hover":{textDecoration:"underline"},color:e.palette.error.main},errorText:{color:e.palette.error.dark,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}));var C=e=>{var t;let n,C,{asset:y,creator:j,toolboxFiatProduct:Z}=e,k=null!==(t=null==y?void 0:y.id)&&void 0!==t?t:0,I=null==y?void 0:y.typeId,{translate:T}=(0,r.$G)(),{isOwned:R}=(0,d.m6)(k),{classes:S}=f(),{data:N}=(0,u.A8)(),L=(0,p.px)(),D=(0,p.dc)(null==j?void 0:j.id),M=(0,p.m_)(),{user:U}=(0,b.je)(),{getProduct:F}=(0,w.AM)(),{data:B}=(0,u.KO)(k,I,(null==U?void 0:U.id)!==void 0,Z,F,!0),A=(0,i.Z)(e=>e.breakpoints.down(g.wt)),P=null==B?void 0:B.purchasable,E=!!B&&(0,h.Z)(B),V=!1;R?n=T("Label.ItemAvailableInInventory"):E&&(null==N?void 0:N.purchaserStatus)===c._W.CountryRestricted?(n=T("Message.CountryRestrictedPurchase"),V=!0):E&&L?(n=T("Message.SpendingLimitHit"),V=!0):E&&D?(n=T("Message.TransactionLimitHit"),V=!0):E&&!M?(n=(0,a.jsx)(v.Z,{linkTargetUrl:m.Z.getAccountSettingsBillingUrl(),opening:"linkStart",closing:"linkEnd",translationKey:"Message.PurchasesNotAllowedHit",variant:"body1",textClass:S.errorText,linkClass:S.errorLinkText}),V=!0):B&&!P&&(n=T("Message.CannotPurchaseItem"),V=!0);let{isWebViewAvailable:W}=(0,x.ZF)(),z=V?"error":W||A?"secondary":"inherit";C=W?"smallLabel1":A?"body2":"body1";let H=(0,a.jsx)(s.JrY,{fontSize:"small",className:S.checkIcon});return(V?H=(0,a.jsx)(s.Rlf,{color:z,fontSize:"small",className:S.checkIcon}):R&&(H=(0,a.jsx)(s.kMe,{fontSize:"small",color:A?"disabled":"inherit",className:S.checkIcon})),n)?(0,a.jsxs)(o.Z,{container:!0,alignItems:"center","data-testid":"assetInfoText",direction:"row",wrap:"nowrap",className:S.availableInInventoryContainer,justifyContent:A?"flex-start":"flex-end",children:[H,(0,a.jsx)(l.Z,{color:z,variant:C,children:n})]}):null}},16678:function(e,t,n){n.d(t,{Z:function(){return $}});var a=n(85893),i=n(67294),s=n(39977),o=n(44579),l=n(61555),r=n(53316),d=n(73694),c=n(80137),u=n(69057),p=n(57140),h=n(38380),m=n(18439),v=n(39853),g=n(23887),x=n(74279),b=n(31634),w=n(60553),f=n(73277),C=n(54790),y=n(26170);let j=(0,y.Z)()((e,t)=>{let{hasPreviousImage:n,hasNextImage:a,isWebViewAvailable:i}=t,s={"&:hover":{backgroundColor:i?C.a6[110]:e.palette.actionV2.primary.fill,opacity:1},backgroundColor:i?C.a6[110]:e.palette.actionV2.primary.fill,color:i?C.Mz:e.palette.content.inverse,opacity:0,pointerEvents:"all",position:"absolute",transition:"opacity 0.4s ease"};return{container:{position:"relative"},mediaContainer:{aspectRatio:f.p5,height:f.PW,padding:0,width:"100%"},mediaImg:{objectFit:"contain",width:"100%"},nextImageButton:{...s,right:20,visibility:a?"visible":"hidden"},previousImageButton:{...s,left:20,visibility:n?"visible":"hidden"}}});var Z=e=>{let{assetId:t,assetTypeId:n,searchId:s}=e,[l,r]=(0,i.useState)(0),[d,f]=(0,i.useState)([t]),{loading:C,error:y,assetMediaIds:Z}=(0,m.vb)(t),{translate:k}=(0,x.$G)(),{assetSearchResultSourceMap:I}=(0,b.j0)(),{isWebViewAvailable:T}=(0,w.ZF)(),R=d[l],S=l>0,{classes:{mediaImg:N,mediaContainer:L,nextImageButton:D,previousImageButton:M,container:U}}=j({hasNextImage:l<d.length-1,hasPreviousImage:S,isWebViewAvailable:T});(0,i.useEffect)(()=>{f([t]),r(0)},[t]),(0,i.useEffect)(()=>{if(!C&&Z&&Z.length>0&&f([t,...Z]),y)throw Error("failed to fetch additional asset media for assetId: ".concat(t,", error: ").concat(y))},[t,y,C,Z]);let{sendEvent:F}=(0,v.Z)(),B=(0,i.useCallback)((e,a)=>{var i;F(g.B_.AssetMediaImpression,{assetId:t,assetTypeId:n,imageId:d[a],imageIndex:a,searchId:s,searchResultSource:null!==(i=I.get(null!=t?t:0))&&void 0!==i?i:"",source:g.At.ImagePreviewActive}),r(a)},[t,I,n,d,s,F]),A=(0,i.useCallback)(e=>{e.stopPropagation(),l>0&&B(e,l-1)},[l,B]),P=(0,i.useCallback)(e=>{e.stopPropagation(),l<d.length-1&&B(e,l+1)},[l,B,d.length]),E=(0,i.useCallback)(e=>{e===c.vi.Blocked&&f(d.filter(e=>e!==R))},[R,d]);return(0,a.jsxs)(o.Z,{container:!0,alignItems:"center","data-testid":"compactMediaViewer",justifyContent:"center",className:U,children:[(0,a.jsx)(c.ef,{alt:k("Label.AssetPreview"),containerClass:L,imgClassName:N,onLoadThumbnailStatus:E,size:c.N3._768x432,targetId:R,type:c.Ij.assetThumbnail},R),(0,a.jsx)(u.Z,{"data-testid":"previousImageButton",size:"large","aria-label":k("Action.PreviousImage"),className:M,onClick:A,children:(0,a.jsx)(p.W3K,{fontSize:"small"})}),(0,a.jsx)(u.Z,{"data-testid":"nextImageButton",size:"large","aria-label":k("Action.NextImage"),className:D,onClick:P,children:(0,a.jsx)(h.N,{fontSize:"small"})})]})},k=n(70509),I=n(39705),T=n(90102),R=n(10937),S=n(34420),N=n(2948),L=n(19118),D=n(14955),M=n(90590),U=n(51972);let F=(0,y.Z)()(()=>({container:{alignItems:"center",display:"flex",height:"100%",justifyContent:"center",maxHeight:"80vh",maxWidth:"80vw"},image:{maxHeight:"100%",maxWidth:"100%",objectFit:"contain"},loadingContainer:{height:"100%"}}));var B=e=>{let{alt:t,targetId:n}=e,{classes:i}=F(),{frontendFlags:s,loadingFrontendFlags:l}=(0,S.YV)(),{data:r,isLoading:d}=(0,M.W)(n,s[N.Wu.FrontendFlagCacheFullResolutionImages]);return l||d?(0,a.jsx)(o.Z,{container:!0,className:i.loadingContainer,children:(0,a.jsx)(U.Z,{})}):r?(0,a.jsx)(o.Z,{container:!0,className:i.container,children:(0,a.jsx)("img",{src:r,alt:t,className:i.image})}):null};let A=(0,y.Z)()(e=>({centerImageContainer:{alignItems:"center",display:"flex",flex:1,height:"100%",justifyContent:"center",position:"relative",width:"100%"},close:{position:"absolute",right:0,top:0},dialogBackdrop:{backgroundColor:"rgba(0,0,0,0.7)"},dialogPaper:{backgroundColor:"transparent",borderRadius:0,display:"flex",flexDirection:"column",height:"100vh",margin:0,maxHeight:"none",padding:32,width:"100vw"},footer:{"& > *":{marginLeft:4},"& > *:first-of-type":{marginLeft:0},display:"flex",height:32,justifyContent:"center",marginTop:16},footerImage:{backgroundColor:e.palette.components.input.filled.enableFill,borderRadius:4,cursor:"pointer",display:"flex",height:32,objectFit:"cover",width:32},footerImageSelected:{transform:"scale(1.05) translateY(-2px)"},footerImageUnselected:{opacity:"0.5"},image:{height:700,maxHeight:"80%",maxWidth:"80%",position:"absolute",width:700},imageContainer:{alignItems:"center",display:"flex",flex:1,flexDirection:"row",position:"relative"},previousButton:{transform:"scaleX(-1)"},slideImg:{objectFit:"contain"}}));var P=e=>{let{open:t,onClose:n,assetMediaIds:s,assetId:l,assetType:r,currentIndex:d=0}=e,[p,m]=(0,i.useState)(d),w=(0,i.useRef)(),{classes:{image:f,dialogPaper:C,dialogBackdrop:y,close:j,footer:Z,footerImage:k,footerImageSelected:I,footerImageUnselected:R,imageContainer:M,centerImageContainer:U,previousButton:F,slideImg:P},cx:E}=A(),{frontendFlags:V}=(0,S.YV)(),{translate:W}=(0,x.$G)(),z=s.length;(0,i.useEffect)(()=>{m(d)},[d]);let H=(0,i.useCallback)(()=>{m(e=>0===e?z-1:e-1)},[z]),G=(0,i.useCallback)(()=>{m(e=>(e+1)%z)},[z]),_=(0,i.useCallback)(()=>{H()},[H]),O=(0,i.useCallback)(()=>{G()},[G]),$=(0,i.useCallback)(e=>{m(e)},[]),{sendEvent:Y}=(0,v.Z)(),{assetSearchResultSourceMap:K,searchUuid:q}=(0,b.j0)();return(0,i.useEffect)(()=>{if(w.current&&document.removeEventListener("keydown",w.current),t){var e;Y(g.B_.AssetMediaImpression,{assetId:l,assetTypeId:null!=r?r:0,imageId:s[p],imageIndex:p+1,searchId:null!=q?q:"",searchResultSource:null!==(e=K.get(null!=l?l:0))&&void 0!==e?e:"",source:g.At.ImagePreviewActive});let t=e=>{"Esc"===e.key?n():"ArrowLeft"===e.key||"ArrowUp"===e.key||"PageUp"===e.key?H():("ArrowRight"===e.key||"ArrowDown"===e.key||"PageDown"===e.key)&&G()};document.addEventListener("keydown",t),w.current=t}},[l,s,K,r,p,G,n,t,H,q,Y]),(0,i.useEffect)(()=>()=>{w.current&&document.removeEventListener("keydown",w.current)},[]),(0,a.jsx)(L.Z,{"data-testid":"lightbox",fullScreen:!0,maxWidth:!1,onClick:e=>e.stopPropagation(),onClose:n,open:t,PaperProps:{className:C},slotProps:{backdrop:{className:y}},children:s[p]&&(0,a.jsxs)(i.Fragment,{children:[(0,a.jsxs)("div",{className:M,children:[(0,a.jsx)(u.Z,{"aria-label":"previous image",className:F,color:"secondary","data-testid":"prev-button",onClick:_,size:"large",children:(0,a.jsx)(h.N,{})}),(0,a.jsx)(o.Z,{className:U,"data-testid":"lightbox-main-image",onClick:n,children:V[N.Wu.FrontendFlagFullResolutionImages]?(0,a.jsx)(B,{alt:W("Label.AssetPreview"),targetId:s[p]}):(0,a.jsx)(T.Z,{alt:W("Label.AssetPreview"),gridClassName:f,imgClassName:P,onClick:e=>e.stopPropagation(),size:c.N3._768x432,targetId:s[p],type:c.Ij.assetThumbnail})}),(0,a.jsx)(u.Z,{"aria-label":"next image",color:"secondary","data-testid":"next-button",onClick:O,size:"large",children:(0,a.jsx)(h.N,{})}),(0,a.jsx)(u.Z,{"aria-label":"close image viewer",className:j,color:"secondary","data-testid":"close-button",onClick:n,size:"large",children:(0,a.jsx)(D.C,{})})]}),(0,a.jsx)("div",{className:Z,"data-testid":"lightbox-footer",children:s.map((e,t)=>{let n=t===p;return(0,a.jsx)("div",{className:E(k,{[I]:n,[R]:!n}),"data-testid":"lightbox-footer-image",onClick:()=>$(t),children:(0,a.jsx)(T.Z,{alt:W("Label.AssetPreviewFooter"),imgClassName:P,size:c.N3._768x432,targetId:e,type:c.Ij.assetThumbnail})},t.toString())})})]})})};let E=(0,y.Z)()((e,t)=>{let{imageSpacing:n,thumbnailHeight:a,mediaAspectRatio:i}=t,s={aspectRatio:i,height:"auto",overflow:"hidden",position:"relative",width:"auto"};return{container:{display:"flex",gap:n,height:a,minWidth:a,position:"relative",width:"100%"},imageOverlay:{alignItems:"center",aspectRatio:i,background:"rgba(0,0,0,0.6)",bottom:0,display:"flex",flexDirection:"column",height:"100%",justifyContent:"center",left:0,position:"absolute",right:0,top:0,width:"auto"},mediaContainer:{...s},videoContainer:{...s,border:"none",borderRadius:0},mediaImg:{aspectRatio:i,backgroundColor:e.palette.surface[200],height:a,objectFit:"cover",width:"auto"}}});var V=e=>{let t,{className:n,assetId:s,assetType:o,searchId:d,onThumbnailClick:u,thumbnailHeight:p=f.PW,mediaAspectRatio:h=f.p5,imageSpacing:w=f.Y7}=e,[C,y]=(0,i.useState)(!1),[j,Z]=(0,i.useState)(0),[L,D]=(0,i.useState)(0),[M,U]=(0,i.useState)([]),{frontendFlags:F}=(0,S.YV)(),B=F[N.Wu.FFlagEnableVideoPreviews],{loading:A,error:V,assetMediaIds:W}=(0,m.vb)(s,o!==r.a9.Video),{translate:z}=(0,x.$G)(),{classes:{container:H,mediaImg:G,mediaContainer:_,videoContainer:O,imageOverlay:$},cx:Y}=E({imageSpacing:w,mediaAspectRatio:h.toString(),thumbnailHeight:p}),K=(0,i.useRef)(null),[q,X]=(0,i.useState)(new Set),{assetSearchResultSourceMap:Q}=(0,b.j0)();(0,i.useEffect)(()=>{let e=()=>{if(null===K.current){requestAnimationFrame(e);return}D(Math.floor(K.current.offsetWidth/(p*h)))};return window.addEventListener("resize",e),e(),()=>window.removeEventListener("resize",e)},[p,w,h]),(0,i.useEffect)(()=>{if(A||void 0===s||void 0===W||U([...W]),V)throw Error("failed to fetch additional asset media for assetId(".concat(s,") ").concat(V))},[s,V,A,W]);let J=(0,i.useCallback)(()=>{y(!1)},[]),{sendEvent:ee}=(0,v.Z)(),et=(0,i.useCallback)((e,t)=>{ee(g.B_.ImagePreviewOpened,{assetId:s,assetMediaId:M[t],searchId:d}),e.stopPropagation(),Z(t),y(!0),u&&u(t)},[s,M,u,d,ee]);return A?(0,a.jsx)(k.C,{color:"secondary"}):(0,a.jsxs)(i.Fragment,{children:[(0,a.jsxs)("div",{className:Y(H,n),"data-testid":"image-viewer",ref:K,children:[B&&o===r.a9.Video&&(0,a.jsx)(I.C,{variant:"outlined",square:!0,className:O,children:(0,a.jsx)(R.o,{videoAssetId:s.toString(),environment:(t="production",t="production",["sitetest1","development"].includes("production")&&(t="sitetest1"),"sitetest3"==="production".toString()&&(t="sitetest3"),t),src:void 0,className:G,"data-video":"true"})}),M.slice(0,L).map((e,t)=>{let n=t===L-1&&L<M.length;if(!n&&!q.has(e)){var i;ee(g.B_.AssetMediaImpression,{assetId:s,assetTypeId:null!=o?o:0,imageId:e,imageIndex:j+1,searchId:d,searchResultSource:null!==(i=Q.get(null!=s?s:0))&&void 0!==i?i:"",source:g.At.ImagePreviewPassive}),q.add(e),X(q)}return(0,a.jsx)(T.Z,{alt:z("Label.AssetPreview"),gridClassName:_,imgClassName:G,onClick:e=>et(e,t),onLoadThumbnailStatus:t=>{t===c.vi.Blocked&&U(M.filter(t=>t!==e))},size:c.N3._768x432,targetId:e,type:c.Ij.assetThumbnail,children:n&&(0,a.jsx)("div",{className:$,children:(0,a.jsx)(l.Z,{variant:"largeLabel1",children:"+".concat(M.length-L+1)})})},e)})]}),(0,a.jsx)(P,{assetId:s,assetMediaIds:M,assetType:o,currentIndex:j,onClose:J,open:C})]})},W=n(57417),z=n(98857),H=n(72054),G=n(63545),_=n(80354);let O=(0,y.Z)()((e,t)=>{let n,{isAudio:a,isFont:i,isItemDetailsPage:s,isWebViewAvailable:o,shouldDisplayMediaCarousel:l,shouldDisplayCompactMediaViewer:r}=t;n=l?f.PW:a?f.Qr:f.WQ;let d=8;l?d=24:i&&(d=20);let c=l?f.Y7:f.$H,u=e.palette.surface[200];return{assetMediaContainer:{...o&&{backgroundColor:e.palette.surface[300]},marginBottom:d,height:"auto",width:i||l?"100%":n,[e.breakpoints.down(W.wt)]:{width:"100%",justifyContent:"center",borderRadius:8}},imageAndDescriptionContainer:{width:"fit-content",[e.breakpoints.down(W.wt)]:{alignItems:"center",justifyContent:"center",marginBottom:0,width:"100%"}},audioDetails:{display:"block",width:n},fontColumn:{height:f.xG,margin:"auto",overflow:"hidden",width:"100%",alignItems:"center",display:"flex"},fontContainer:{height:f.Q},fontThumbnail:{filter:"light"===e.palette.mode?"invert()":"none",height:f.Q,maskImage:"linear-gradient(to left, rgba(0,0,0,0) 0%, rgba(0,0,0,1) 40%)",position:"relative",width:"auto"},previewContainer:{position:"relative",flexGrow:1},thumbnail:{borderRadius:l?0:8,position:"relative",height:n,width:n,[e.breakpoints.up(W.wt)]:{backgroundColor:u},[e.breakpoints.down(W.wt)]:{height:f.xL,width:f.xL}},thumbnailColumn:{height:n,marginRight:c,width:n,[e.breakpoints.down(W.wt)]:{height:f.xL,marginRight:0,width:f.xL,...r&&{margin:0,width:"100%"}}},thumbnailContainer:{marginBottom:8},toggleButton:{position:"absolute",zIndex:1e3,[e.breakpoints.down(W.wt)]:{left:(0,W.o3)(s,o)}}}});var $=e=>{var t,n,u,p,h;let v,{asset:x,creator:C}=e,{audioDetails:y,name:j}=x,{arePreviewsEnabled:k,assetId:I,isMusic:T,isAudio:R,isFont:L,isPlugin:D}=(0,d.Z)(x),{searchUuid:M}=(0,b.j0)(),{frontendFlags:U}=(0,S.YV)(),F=U[N.Wu.FFlagEnableVideoPreviews],{assetMediaIds:B}=(0,m.vb)(I,k),A=(0,w.ZF)(),P=(0,s.Z)(e=>e.breakpoints.down(W.wt)),E=(k&&(null==C?void 0:C.isVerifiedCreator)===!0&&void 0!==B&&B.length>0||x.typeId===r.a9.Video&&F)&&!P,$=k&&P;v=L?c.N3._728x90:E?c.N3._250x250:c.N3._420x420;let{isWebViewAvailable:Y}=(0,w.ZF)(),{isItemDetailsPage:K}=(0,G.bX)(),{classes:q}=O({isAudio:R,isFont:L,isItemDetailsPage:K,isWebViewAvailable:Y,shouldDisplayCompactMediaViewer:$,shouldDisplayMediaCarousel:E}),X=(0,i.useCallback)(async()=>{if(null!=x)try{var e,t,n,a;let{hasInserted:i}=await A.call(H.g.insertAsset,{assetId:null!==(e=x.id)&&void 0!==e?e:0,assetName:null!==(t=x.name)&&void 0!==t?t:"",assetSubTypes:null!==(n=null==x?void 0:x.assetSubTypes)&&void 0!==n?n:[],assetTypeId:x.typeId,assetWasDragged:!0,insertionMethod:"DragInsert",isVerifiedCreator:null!==(a=null==C?void 0:C.isVerifiedCreator)&&void 0!==a&&a},w.U5)}catch(e){if(e.code!==_.bU.TIMED_OUT)throw e}},[x,null==C?void 0:C.isVerifiedCreator,A]),Q=(0,i.useMemo)(()=>!D&&!L&&Y,[L,D,Y]);return(0,a.jsxs)(o.Z,{container:!0,direction:"row",flexWrap:"nowrap","data-testid":"assetMediaContainer",className:q.assetMediaContainer,draggable:Q,onDragStart:Q?e=>{e.preventDefault(),X()}:void 0,children:[(0,a.jsxs)(o.Z,{container:!0,item:!0,direction:"column",className:q.imageAndDescriptionContainer,children:[(0,a.jsx)(o.Z,{item:!0,className:L?q.fontColumn:q.thumbnailColumn,children:(0,a.jsx)(z.Z,{asset:x,creator:C,menuSource:g.hc.ItemDetailsThumbnailRightClick,children:$?(0,a.jsx)(Z,{assetId:I,assetTypeId:null!==(t=x.typeId)&&void 0!==t?t:0,searchId:null!=M?M:""}):(0,a.jsx)("div",{"data-testid":"assetThumbnail",children:(0,a.jsx)(c.ef,{containerClass:L?q.fontContainer:q.thumbnailContainer,imgClassName:L?q.fontThumbnail:q.thumbnail,alt:null!=j?j:"Asset Image",targetId:null!==(n=null==x?void 0:x.id)&&void 0!==n?n:0,type:c.Ij.assetThumbnail,size:v})})})}),T&&(null==y?void 0:y.musicAlbum)&&(0,a.jsx)(o.Z,{item:!0,children:(0,a.jsx)(l.Z,{variant:"overline",noWrap:!0,title:null!==(u=null==y?void 0:y.musicAlbum)&&void 0!==u?u:void 0,className:q.audioDetails,children:null==y?void 0:y.musicAlbum})}),T&&(null==y?void 0:y.artist)&&(0,a.jsx)(o.Z,{item:!0,children:(0,a.jsx)(l.Z,{noWrap:!0,title:null!==(p=null==y?void 0:y.artist)&&void 0!==p?p:void 0,className:q.audioDetails,children:null==y?void 0:y.artist})})]}),E&&(0,a.jsx)(o.Z,{item:!0,className:q.previewContainer,children:(0,a.jsx)(V,{assetId:I,assetType:null!==(h=x.typeId)&&void 0!==h?h:0,searchId:null!=M?M:"",thumbnailHeight:f.PW,imageSpacing:f.Y7})})]})}},30251:function(e,t,n){n.d(t,{Z:function(){return ei}});var a,i,s=n(85893),o=n(67294),l=n(39977),r=n(44579),d=n(8537),c=n(7308),u=n(434),p=n(20415),h=n(74279),m=n(51972),v=n(57417),g=n(26170);let x=(0,g.Z)()(()=>({seeMoreReviewsButton:{border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:8,height:30,marginLeft:"auto",marginTop:12,minWidth:164,padding:"4 10 4 10",textTransform:"none"}}));var b=n(61555),w=n(60553),f=n(55575);let C=(0,g.Z)()(e=>({disclaimer:{color:e.palette.content.muted,fontWeight:300,[e.breakpoints.up(v.wt)]:{marginBottom:25,marginTop:13},[e.breakpoints.down(v.wt)]:{marginTop:8}}}));var y=n(78268),j=e=>{let{asset:t,toolboxFiatProduct:n,isFullPageView:a,userReviewExists:i,handleClickSeeMoreReviews:d,handleSetLocalUserReview:c}=e,{translate:u}=(0,h.$G)(),{classes:p}=C(),{isWebViewAvailable:m}=(0,w.ZF)(),g=(0,l.Z)(e=>e.breakpoints.down(v.wt)),x=!m,j=(0,o.useMemo)(()=>(0,s.jsx)(b.Z,{variant:"body2",className:p.disclaimer,children:u("Message.ReviewDisplayDisclaimer")}),[p.disclaimer,u]);return g?(0,s.jsxs)(r.Z,{container:!0,direction:"column","data-testid":"assetReviewsHeadingTestId",children:[(0,s.jsxs)(r.Z,{container:!0,direction:"row",wrap:"nowrap",children:[(0,s.jsx)(f.Z,{displayName:u("Label.Reviews"),enableSeeAll:!a,handleClickSeeAll:d}),x&&(0,s.jsx)(y.Z,{asset:t,toolboxFiatProduct:n,userReviewExists:i,handleSetLocalUserReview:c})]}),j]}):(0,s.jsxs)(r.Z,{container:!0,direction:"column","data-testid":"assetReviewsHeadingTestId",children:[j,x&&(0,s.jsx)(y.Z,{asset:t,toolboxFiatProduct:n,userReviewExists:i,handleSetLocalUserReview:c})]})},Z=n(76172),k=n(58533);let I=(0,g.Z)()(e=>({horizontalDivider:{marginTop:10},infiniteScroll:{overflowY:"hidden"},loadingContainer:{minHeight:100},noReviewsContainer:{backgroundColor:e.palette.background.media,borderRadius:5,height:183,width:"100%",[e.breakpoints.up(v.wt)]:{marginBottom:20,marginTop:25},[e.breakpoints.down(v.wt)]:{marginTop:12}},reviewsListContainer:{[e.breakpoints.up(v.wt)]:{marginTop:15}}}));var T=n(57140),R=n(78627),S=n(69057),N=n(80137),L=n(59031),D=n(57756),M=n(33871),U=n(46339),F=n(97909);let B=(0,g.Z)()(()=>({usernameContainer:{margin:0,padding:0},verifiedBadgeIcon:{height:16,verticalAlign:"bottom",width:16},verifiedBadgeIconContainer:{paddingLeft:4}})),A=(0,F.gi)(),P=e=>"".concat(A,"/users/").concat(e,"/profile");var E=e=>{let{username:t,userId:n,hasVerifiedBadge:a}=e,{classes:i}=B(),{translate:l}=(0,h.$G)();return(0,s.jsx)(o.Fragment,{children:(0,s.jsx)(b.Z,{"data-testid":"verifiedBadgeUsernameWrapper",variant:"h6",children:(0,s.jsx)(U.L,{color:"inherit",target:"_blank",href:P(n),sx:{textDecoration:"none"},children:t})})})},V=n(53717),W=n(88643);let z=(0,g.Z)()(e=>({commentText:{wordBreak:"break-word",[e.breakpoints.up(v.wt)]:{paddingLeft:42}},date:{[e.breakpoints.up(v.wt)]:{marginLeft:8}},helpfulCount:{[e.breakpoints.up(v.wt)]:{marginLeft:"auto"}},inlineReplyButtonContainer:{gap:8,justifyContent:"right"},inlineReplyContainer:{[e.breakpoints.up(v.wt)]:{padding:"24px 0px 12px 42px"},[e.breakpoints.down(v.wt)]:{padding:"12px 0px 12px ".concat(24,"px")}},reviewContainer:{[e.breakpoints.up(v.wt)]:{paddingTop:10},[e.breakpoints.down(v.wt)]:{marginTop:v.Wk}},reviewHeader:{marginBottom:10},reviewItemMenuButton:{[e.breakpoints.up(v.wt)]:{minHeight:30,padding:"5px 16px"}},reviewsMenuIcon:{color:e.palette.content.muted},thumbDown:{color:e.palette.actionV2.important.fill,marginLeft:8,width:"auto"},thumbnail:{borderRadius:"50%",height:30,width:30},thumbnailContainer:{display:"inline-block",height:30,marginRight:12,padding:0,width:30},thumbUp:{color:e.palette.actionV2.active.fill,marginLeft:8,width:"auto"},verticalDivider:{backgroundColor:e.palette.content.muted,borderWidth:1,height:20,marginLeft:12}}));var H=n(59252),G=n(99054),_=n(39954);let O=(0,g.Z)()(e=>({deleteText:{color:e.palette.actionV2.important.fill},helpfulReactionText:{color:e.palette.content.muted},replyText:{color:e.palette.content.muted},reportText:{color:e.palette.actionV2.important.fill}}));var $=n(19118),Y=n(88049),K=n(35475),q=n(86879),X=e=>{let{open:t,translatedConfirmButtonText:n,translatedTitle:a,onClose:i,onConfirm:o}=e,{translate:l}=(0,h.$G)(),{isWebViewAvailable:r}=(0,w.ZF)();return(0,s.jsxs)($.Z,{"data-testid":"publishConfirmationTestId-".concat(a),open:t,onClose:i,children:[(0,s.jsx)(Y.Z,{children:(0,s.jsx)(b.Z,{variant:r?"h5":"h3",children:a})}),(0,s.jsx)(K.Z,{children:(0,s.jsx)(b.Z,{variant:"body1",children:l("Message.CannotBeUndone")})}),(0,s.jsxs)(q.Z,{children:[(0,s.jsx)(d.Z,{variant:"contained",color:"primary",onClick:i,children:l("Action.Cancel")}),(0,s.jsx)(d.Z,{"data-testid":"publishConfirmationButtonTestId-".concat(a),variant:"contained",color:"destructive",onClick:o,children:n})]})]})};(a=i||(i={}))[a.ReviewDeletion=0]="ReviewDeletion",a[a.ReviewReport=1]="ReviewReport",a[a.ReviewReaction=2]="ReviewReaction";var Q=e=>{let{anchorEl:t,byLoggedInUser:n,commentingUsername:a,open:i,reviewId:l,isForReply:r,replyExists:d,userIsCreator:p,handleCloseMenu:m,handleHidingDeletedComment:v,handleOpenInlineReply:g}=e,{classes:x}=O(),{translate:w}=(0,h.$G)(),{user:f,login:C}=(0,W.je)(),{setMessageAndSeverity:y}=(0,u.Ds)(),{createReviewReport:j}=(0,c.qP)(),{createReviewReaction:Z}=(0,c.y7)(),{deleteReview:k}=(0,c.R2)(),[I,T]=(0,o.useState)(null),R=(0,o.useMemo)(()=>({0:{confirmationButton:w("Action.YesDelete"),confirmationDialog:r?w("Message.ReplyDeletionConfirmation"):w("Message.ReviewDeletionConfirmation"),failureMessage:r?w("Message.ReplyNotDeleted"):w("Message.ReviewNotDeleted"),publishMethod:()=>k(l),successMessage:r?w("Message.ReplyDeleted"):w("Message.ReviewDeleted")},1:{confirmationButton:w("Label.Report"),confirmationDialog:w("Message.ReportConfirmation",{userName:a}),failureMessage:w("Message.ReportNotSubmitted",{username:a}),publishMethod:()=>j(l,"",""),successMessage:w("Message.ReportSubmitted",{username:a})},2:{confirmationButton:null,confirmationDialog:null,failureMessage:w("Message.ReactionNotSubmitted",{username:a}),publishMethod:()=>Z(l,_.le.Helpful),successMessage:w("Message.ReactionSubmitted",{username:a})}}),[a,Z,j,k,r,l,w]),S=(0,o.useCallback)(()=>{T(null)},[]),N=(0,o.useCallback)(async e=>{let t=R[e];!0===await t.publishMethod()?(y({severity:"success",translatedMessage:t.successMessage}),0===e&&v&&v(),S()):y({severity:"error",translatedMessage:t.failureMessage})},[S,v,R,y]),L=async e=>{if(!f){C();return}m(),2===e?N(e):T(e)};return(0,s.jsxs)(o.Fragment,{children:[(0,s.jsxs)(H.Z,{id:"reviewItemMenu","data-testid":"reviewMenuTestId",anchorEl:t,anchorOrigin:{horizontal:"right",vertical:"bottom"},transformOrigin:{horizontal:"right",vertical:"top"},open:i,onClose:m,children:[n&&(0,s.jsx)(G.Z,{"data-testid":"deleteMenuItemTestId",onClick:()=>L(0),disabled:!n,children:(0,s.jsx)(b.Z,{className:x.deleteText,children:w("Label.Delete")})}),(0,s.jsx)(G.Z,{"data-testid":"reportMenuItemTestId",onClick:()=>L(1),disabled:n,children:(0,s.jsx)(b.Z,{className:x.reportText,children:w("Label.Report")})}),(0,s.jsx)(G.Z,{"data-testid":"helpfulMenuItemTestId",onClick:()=>L(2),disabled:n,children:(0,s.jsx)(b.Z,{className:x.helpfulReactionText,children:w("Label.Helpful")})}),void 0!==g&&p&&!d&&(0,s.jsx)(G.Z,{"data-testid":"replyMenuItemTestId",onClick:g,children:(0,s.jsx)(b.Z,{className:x.replyText,children:w("Label.Reply")})})]}),(0,s.jsx)(X,{open:0===I,translatedConfirmButtonText:R[0].confirmationButton,translatedTitle:R[0].confirmationDialog,onClose:S,onConfirm:()=>N(0)}),(0,s.jsx)(X,{open:1===I,translatedConfirmButtonText:R[1].confirmationButton,translatedTitle:R[1].confirmationDialog,onClose:S,onConfirm:()=>N(1)})]})};let J=(0,g.Z)()(e=>({date:{[e.breakpoints.up(v.wt)]:{marginLeft:12}},helpfulCount:{[e.breakpoints.up(v.wt)]:{marginLeft:"auto"}},replyContainer:{[e.breakpoints.up(v.wt)]:{paddingLeft:42,paddingTop:18},[e.breakpoints.down(v.wt)]:{paddingLeft:24,paddingTop:12}},replyHeader:{marginBottom:10},replyItemMenuButton:{[e.breakpoints.up(v.wt)]:{minHeight:30,padding:"5px 16px"}},replyMenuIcon:{color:e.palette.content.muted},replyText:{wordBreak:"break-word",[e.breakpoints.up(v.wt)]:{paddingLeft:42}},thumbnail:{borderRadius:"50%",height:30,width:30},thumbnailContainer:{display:"inline-block",height:30,marginRight:12,padding:0,width:30},verticalDivider:{backgroundColor:e.palette.content.muted,borderWidth:1,height:20,marginLeft:12}}));var ee=e=>{let{reply:t,handleHidingDeletedReply:n}=e,{classes:a}=J(),{translate:i}=(0,h.$G)(),{user:c}=(0,W.je)(),{id:u,replyingUserId:p,replyingUsername:m,replyingUserHasVerifiedBadge:g,text:x,helpfulCount:w,createdUtc:f}=t,[C,y]=(0,o.useState)(null),j=!!C,k=(0,l.Z)(e=>e.breakpoints.down(v.wt)),I=(0,o.useCallback)(e=>{y(e.currentTarget)},[y]),R=(0,o.useCallback)(()=>{y(null)},[y]),D=(0,o.useMemo)(()=>(0,s.jsx)(N.ef,{alt:i("Label.CreatorReply"),containerClass:a.thumbnailContainer,imgClassName:a.thumbnail,includeBackground:!1,size:N.YB._48x48,targetId:p,type:N.Ij.avatarHeadshot}),[p,a,i]),M=(0,o.useMemo)(()=>(0,s.jsx)(E,{hasVerifiedBadge:g,username:i("Label.CreatorReply"),userId:p}),[g,p,i]),U=(0,o.useMemo)(()=>(0,s.jsx)(Q,{isForReply:!0,anchorEl:C,byLoggedInUser:(null==c?void 0:c.id)===p,commentingUsername:m,handleCloseMenu:R,handleHidingDeletedComment:n,open:j,reviewId:u}),[C,R,n,u,j,m,p,null==c?void 0:c.id]);return k?(0,s.jsxs)(r.Z,{className:a.replyContainer,container:!0,"data-testid":"assetReplyTestId-".concat(u||0),direction:"column",gap:1,children:[(0,s.jsxs)(r.Z,{alignItems:"center",container:!0,direction:"row",justifyContent:"space-between",wrap:"nowrap",children:[(0,s.jsxs)(r.Z,{alignItems:"center",container:!0,children:[D,M]}),(0,s.jsx)(S.Z,{"aria-label":"replyMenuButton","aria-haspopup":"true","aria-controls":j?"reviewItemMenu":void 0,"aria-expanded":j?"true":"false",className:a.replyItemMenuButton,"data-testid":"replyMenuButtonTestId",onClick:I,size:"small",children:(0,s.jsx)(T.E0C,{className:a.replyMenuIcon})})]}),(0,s.jsxs)(r.Z,{alignItems:"center",container:!0,direction:"row",justifyContent:"space-between",wrap:"nowrap",children:[(0,s.jsx)(b.Z,{className:a.date,variant:"body2",children:(0,L.ar)(new Date(f))}),(0,s.jsx)(b.Z,{className:a.helpfulCount,color:"disabled",variant:"body2",children:w>0&&i("Label.HelpfulCount",{helpfulCount:w.toString()})}),U]}),(0,s.jsx)(b.Z,{className:a.replyText,color:"secondary",variant:"body2",children:x})]}):(0,s.jsxs)(r.Z,{className:a.replyContainer,container:!0,"data-testid":"assetReplyTestId-".concat(u||0),direction:"column",children:[(0,s.jsxs)(r.Z,{alignItems:"center",container:!0,direction:"row",className:a.replyHeader,children:[D,M,(0,s.jsx)(Z.Z,{orientation:"vertical",className:a.verticalDivider}),(0,s.jsx)(b.Z,{variant:"body2",className:a.date,children:(0,L.ar)(new Date(f))}),(0,s.jsx)(b.Z,{variant:"body2",className:a.helpfulCount,children:w>0&&i("Label.HelpfulCount",{helpfulCount:w.toString()})}),(0,s.jsx)(d.Z,{"data-testid":"replyMenuButtonTestId","aria-haspopup":"true","aria-controls":j?"reviewItemMenu":void 0,"aria-expanded":j?"true":"false",onClick:I,className:a.replyItemMenuButton,children:(0,s.jsx)(T.E0C,{className:a.replyMenuIcon})}),U]}),(0,s.jsx)(b.Z,{variant:"body2",className:a.replyText,children:x})]})},et=e=>{var t;let{review:n,userIsCreator:a,byLoggedInUser:i=!1,handleHidingDeletedUserReview:p}=e,{id:m,assetId:g,commentingUserId:x,commentingUsername:f,commentingUserHasVerifiedBadge:C,text:y,isRecommended:j,reply:k,helpfulCount:I,createdUtc:U}=n,{classes:F}=z(),{translate:B}=(0,h.$G)(),{setMessageAndSeverity:A}=(0,u.Ds)(),{createReview:P,loading:H}=(0,c.IV)(),{isWebViewAvailable:G}=(0,w.ZF)(),{user:_}=(0,W.je)(),O=null!==(t=null==_?void 0:_.id)&&void 0!==t?t:0,[$,Y]=(0,o.useState)(""),[K,q]=(0,o.useState)(!1),[X,J]=(0,o.useState)(!1),[et,en]=(0,o.useState)(null),[ea,ei]=(0,o.useState)(null!=k?k:null),es=!!et,eo=(0,l.Z)(e=>e.breakpoints.down(v.wt)),el=(0,o.useCallback)(e=>{en(e.currentTarget)},[en]),er=(0,o.useCallback)(()=>{en(null)},[en]),ed=(0,o.useCallback)(()=>{J(!0),er()},[er]),ec=(0,o.useCallback)(()=>{Y(""),J(!1)},[J]),eu=(0,o.useCallback)(e=>{e.preventDefault(),Y(e.target.value),K&&q(!1)},[K]),ep=(0,o.useCallback)(async()=>{var e,t;if(void 0===g)return;let n=await P(g,$,m),a=null!==(t=null==n?void 0:null===(e=n.error)||void 0===e?void 0:e.errorType)&&void 0!==t?t:null;if(null===n||a)a===D.ju.InappropriateContent&&q(!0),A({severity:"error",translatedMessage:B((0,V.Z)(a)),translatedTitle:B("Message.ReplyNotPublished",{username:f})});else{if(A({severity:"success",translatedMessage:B("Message.ReplyPublished",{username:f})}),n.comment){let{comment:e}=n,t={createdUtc:e.createdUtc,helpfulCount:e.helpfulCount,id:e.id,replyingUserHasVerifiedBadge:e.commentingUserHasVerifiedBadge,replyingUserId:e.commentingUserId,replyingUsername:e.commentingUsername,text:e.text};ei((0,M.mi)(t))}ec()}},[g,P,$,m,A,B,f,ec]),eh=(0,o.useCallback)(()=>{ei(null)},[]),em=(0,o.useMemo)(()=>(0,s.jsx)(N.ef,{alt:f,containerClass:F.thumbnailContainer,imgClassName:F.thumbnail,includeBackground:!1,targetId:x,type:N.Ij.avatarHeadshot,size:N.YB._48x48}),[x,f,F]),ev=(0,o.useMemo)(()=>(0,s.jsx)(E,{hasVerifiedBadge:C,username:i?B("Label.AuthenticatedUserReview"):f,userId:i?O:x}),[i,f,C,x,O,B]),eg=(0,o.useMemo)(()=>(0,s.jsx)(T.$TJ,{"aria-label":"Thumbs up",className:F.thumbUp,fontSize:"small"}),[F]),ex=(0,o.useMemo)(()=>(0,s.jsx)(T.SJr,{"aria-label":"Thumbs down",className:F.thumbDown,fontSize:"small"}),[F]),eb=(0,o.useMemo)(()=>(0,s.jsx)(Q,{anchorEl:et,byLoggedInUser:i,commentingUsername:f,handleCloseMenu:er,handleOpenInlineReply:ed,handleHidingDeletedComment:p,open:es,replyExists:null!==ea,reviewId:m,userIsCreator:a}),[et,i,f,ea,er,p,ed,m,es,a]),ew=(0,o.useMemo)(()=>(0,s.jsxs)(r.Z,{container:!0,className:F.inlineReplyContainer,children:[(0,s.jsx)(R.Z,{fullWidth:!0,multiline:!0,id:"assetReviewTextField",variant:"outlined",rows:4,inputProps:{maxLength:c.xU},label:B("Label.WriteYourReply"),helperText:B("Label.RemainingLength",{currentLength:$.length.toString(),maxLength:c.xU.toString()}),onChange:eu,value:$,InputLabelProps:G?{shrink:!0}:{}}),(0,s.jsxs)(r.Z,{container:!0,className:F.inlineReplyButtonContainer,children:[(0,s.jsx)(d.Z,{variant:"outlined",color:"primary",onClick:ec,children:B("Action.Cancel")}),(0,s.jsx)(d.Z,{variant:"outlined",onClick:ep,disabled:void 0===g||0===$.trim().length||$.length>c.xU||H||K,children:B("Action.Save")})]})]}),[g,ec,ep,eu,K,G,H,$,F,B]);return eo?(0,s.jsxs)(r.Z,{container:!0,direction:"column","data-testid":"assetReviewTestId-".concat(m||0),className:F.reviewContainer,gap:1,children:[(0,s.jsxs)(r.Z,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",wrap:"nowrap",children:[(0,s.jsxs)(r.Z,{item:!0,container:!0,alignItems:"center",wrap:"nowrap",children:[em,ev]}),(0,s.jsxs)(r.Z,{item:!0,container:!0,justifyContent:"flex-end",alignItems:"center",wrap:"nowrap",children:[!0===j&&eg,!1===j&&ex,(0,s.jsx)(S.Z,{"aria-label":"reviewMenuButton","data-testid":"reviewMenuButtonTestId","aria-haspopup":"true","aria-controls":es?"reviewItemMenu":void 0,"aria-expanded":es?"true":"false",size:"small",onClick:el,className:F.reviewItemMenuButton,children:(0,s.jsx)(T.E0C,{className:F.reviewsMenuIcon})})]})]}),(0,s.jsxs)(r.Z,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",children:[(0,s.jsx)(b.Z,{variant:"body2",className:F.date,children:(0,L.ar)(new Date(U))}),(0,s.jsx)(b.Z,{variant:"body2",color:G?"secondary":"disabled",className:F.helpfulCount,children:I>0&&B("Label.HelpfulCount",{helpfulCount:I.toString()})})]}),eb,(0,s.jsx)(b.Z,{variant:"body2",color:"secondary",className:F.commentText,children:y}),X&&ew,ea&&(0,s.jsx)(ee,{reply:ea,handleHidingDeletedReply:eh})]}):(0,s.jsxs)(r.Z,{container:!0,direction:"column","data-testid":"assetReviewTestId-".concat(m||0),className:F.reviewContainer,children:[(0,s.jsxs)(r.Z,{container:!0,alignItems:"center",direction:"row",className:F.reviewHeader,children:[em,ev,(0,s.jsx)(Z.Z,{orientation:"vertical",className:F.verticalDivider}),!0===j&&eg,!1===j&&ex,(0,s.jsx)(b.Z,{variant:"body2",className:F.date,children:(0,L.ar)(new Date(U))}),(0,s.jsx)(b.Z,{variant:"body2",className:F.helpfulCount,children:I>0&&B("Label.HelpfulCount",{helpfulCount:I.toString()})}),(0,s.jsx)(d.Z,{"data-testid":"reviewMenuButtonTestId","aria-haspopup":"true","aria-controls":es?"reviewItemMenu":void 0,"aria-expanded":es?"true":"false",onClick:el,className:F.reviewItemMenuButton,children:(0,s.jsx)(T.E0C,{className:F.reviewsMenuIcon})}),eb]}),(0,s.jsx)(b.Z,{variant:"body2",className:F.commentText,children:y}),X&&ew,ea&&(0,s.jsx)(ee,{reply:ea,handleHidingDeletedReply:eh})]})},en=e=>{let{userReview:t,reviewsList:n,moreReviewsExist:a,userIsCreator:i,fetchMoreReviews:d,handleHidingDeletedUserReview:c}=e,{classes:u}=I(),{translate:p}=(0,h.$G)(),g=(0,l.Z)(e=>e.breakpoints.down(v.wt)),x=(0,o.useMemo)(()=>!g&&(0,s.jsx)(Z.Z,{orientation:"horizontal",variant:"fullWidth",className:u.horizontalDivider}),[g,u]);return t||n&&0!==n.length?(0,s.jsxs)(r.Z,{container:!0,direction:"column","data-testid":"assetReviewsListTestId",className:u.reviewsListContainer,children:[t&&(0,s.jsxs)(o.Fragment,{children:[x,(0,s.jsx)(et,{byLoggedInUser:!0,review:t,handleHidingDeletedUserReview:c})]}),n&&(0,s.jsx)(k.Z,{dataLength:n.length,next:d,hasMore:a,loader:(0,s.jsx)(m.Z,{}),scrollThreshold:"2000px",style:{overflowY:"hidden"},endMessage:x,children:n.map((e,t)=>(0,s.jsxs)(o.Fragment,{children:[x,(0,s.jsx)(et,{review:e,userIsCreator:i})]},e.id||t))})]}):(0,s.jsx)(r.Z,{container:!0,alignItems:"center",justifyContent:"center","data-testid":"assetReviewsListNoReviewsTestId",className:u.noReviewsContainer,children:(0,s.jsx)(b.Z,{align:"center",color:"secondary",children:p("Message.NoReviewsPublished")})})};let ea=void 0;var ei=e=>{var t,n;let{asset:a,toolboxFiatProduct:i,isFullPageView:g,userReview:b,handleClickSeeMoreReviews:w,handleSetLocalUserReview:f}=e,[C,y]=(0,o.useState)([]),[Z,k]=(0,o.useState)(!1),[I,T]=(0,o.useState)(void 0),[R,S]=(0,o.useState)(!0),N=(0,o.useRef)(!0),L=null!==(t=null==a?void 0:a.id)&&void 0!==t?t:0,{userIsCreator:D,userIsCreatorLoading:M}=(0,c.zT)(L,null!==(n=null==a?void 0:a.typeId)&&void 0!==n?n:0),{getNextReviewsPage:U,reviewsListError:F}=(0,c.cn)(g,L),{translate:B}=(0,h.$G)(),{classes:A}=x(),{setMessageAndSeverity:P}=(0,u.Ds)();F&&P({severity:"error"});let E=(0,l.Z)(e=>e.breakpoints.down(v.wt));(0,o.useEffect)(()=>()=>{N.current=!1},[]),(0,o.useEffect)(()=>{S(!0),y([]),(async()=>{let e=g?50:3,t=b?e-1:e,n=await U(ea,t);if(null!==n&&N.current){let{commentResponses:e,hasMore:t,nextCursor:a}=n;t?(k(!0),T(a)):(k(!1),T(void 0)),e&&y(e),S(!1)}})()},[U,g,b]);let V=(0,o.useCallback)(async()=>{if(!Z)return;let e=await U(I,50);if(null!==e&&N.current){let{commentResponses:t,hasMore:n,nextCursor:a}=e;!R&&t&&t.length>0&&a!==I&&(y(e=>[...e,...t]),n?(k(!0),T(a)):k(!1))}},[U,R,Z,I]),W=(0,o.useCallback)(()=>{R||V()},[R,V]);return R||M?(0,s.jsx)(r.Z,{container:!0,"data-testid":"assetReviewsLoadingSpinner",children:(0,s.jsx)(m.Z,{})}):(0,s.jsxs)(r.Z,{container:!0,direction:"column","data-testid":"assetReviewsTestId",children:[(0,s.jsx)(p.Z,{}),(0,s.jsx)(j,{asset:a,toolboxFiatProduct:i,handleClickSeeMoreReviews:w,isFullPageView:g,userReviewExists:null!==b,handleSetLocalUserReview:f}),(0,s.jsx)(en,{userReview:b,reviewsList:C,userIsCreator:null!=D&&D,moreReviewsExist:!!g&&Z,fetchMoreReviews:W,handleHidingDeletedUserReview:()=>f(null)}),!E&&!g&&Z&&(0,s.jsx)(d.Z,{"data-testid":"seeMoreReviewsButtonTestId",variant:"outlined",color:"primary",size:"small",onClick:w,className:A.seeMoreReviewsButton,children:B("Label.SeeMoreReviews")})]})}},5050:function(e,t,n){n.d(t,{Z:function(){return p}});var a=n(85893),i=n(67294),s=n(39977),o=n(76172),l=n(44579),r=n(61555),d=n(57417),c=n(60553);let u=(0,n(26170).Z)()(e=>({detailContainer:{[e.breakpoints.up(d.wt)]:{marginBottom:8,flex:"1 0 165px"},[e.breakpoints.down(d.wt)]:{justifyContent:"space-between",margin:"12px 0"}},titleContainer:{[e.breakpoints.up(d.wt)]:{marginBottom:4}}}));var p=e=>{let t,{title:n,body:p,showDivider:h=!0}=e,{classes:m}=u(),v=(0,s.Z)(e=>e.breakpoints.down(d.wt)),{isWebViewAvailable:g}=(0,c.ZF)();return t=g?"captionBody":v?"body2":"body1",(0,a.jsxs)(i.Fragment,{children:[v&&h&&(0,a.jsx)(o.Z,{}),(0,a.jsxs)(l.Z,{alignItems:v?"center":"default",container:!0,className:m.detailContainer,direction:v?"row":"column",children:[(0,a.jsx)(r.Z,{color:"secondary",component:"h3",variant:t,className:"string"==typeof p?m.titleContainer:"",children:n}),"string"==typeof p?(0,a.jsx)(r.Z,{variant:t,children:p}):p]})]})}},70554:function(e,t,n){n.d(t,{Z:function(){return T}});var a=n(85893);n(67294);var i=n(44579),s=n(70509),o=n(69057),l=n(57140),r=n(61555),d=n(88643),c=n(59031),u=n(60553);let p=(0,n(26170).Z)()((e,t)=>{let{isWebViewAvailable:n}=t;return{favoritesButton:{height:22,width:22,...n&&{height:20,width:20}},favoritesButtonSvg:{...n&&{height:20,width:20}},favoritesContainer:{display:"flex",flexDirection:"row",gap:2},favoritesCount:{lineHeight:"24px"},favoritesLoadingIcon:{margin:"4px 4px 4px 4px"}}});var h=n(434),m=n(66379),v=n(65059),g=n(97909);class x extends v.Z{getFavoritesCount(e){return this.favoritesApi.v1FavoritesAssetsAssetIdCountGet(e)}deleteUserFavorite(e){return this.favoritesApi.v1FavoritesUsersUserIdAssetsAssetIdFavoriteDelete(e)}getUserFavorite(e){return this.favoritesApi.v1FavoritesUsersUserIdAssetsAssetIdFavoriteGet(e)}setUserFavorite(e){return this.favoritesApi.v1FavoritesUsersUserIdAssetsAssetIdFavoritePost(e)}constructor(e=(0,g.Gd)("catalog")){super(e),this.favoritesApi=new m.Cz(this.defaultConfiguration),this.getFavoritesCount=this.getFavoritesCount.bind(this)}}var b=new x,w=n(67848),f=n(85945),C=n(48228);let y="assetFavorites_";function j(e,t){return["".concat(y,"useIsUserFavorited"),e,t]}function Z(e){return["".concat(y,"useFavoritesCount"),e]}function k(e){return(0,w.a)(Z(e),async()=>{let t=await b.getFavoritesCount({assetId:e});return void 0===t?null:t})}function I(e,t){return(0,w.a)(j(e,t),async()=>void 0===t?null:!!await b.getUserFavorite({assetId:e,userId:t}),{enabled:void 0!==t,initialData:!1})}var T=e=>{let{assetId:t}=e,{user:n}=(0,d.je)(),{isWebViewAvailable:m}=(0,u.ZF)(),{classes:v}=p({isWebViewAvailable:m}),{data:g}=k(t),{data:x,isLoading:w}=I(t,null==n?void 0:n.id),{mutate:T,isLoading:R}=function(e,t){let n=(0,f.NL)(),{data:a}=k(e),{data:i}=I(e,t),{setMessageAndSeverity:s}=(0,h.Ds)();return(0,C.D)(["".concat(y,"useToggleUserFavorite"),e,t],async()=>{if(void 0===t)throw Error("User ID is required to toggle favorite status");i?await b.deleteUserFavorite({assetId:e,userId:t}):await b.setUserFavorite({assetId:e,userId:t})},{onError:()=>{s({severity:"error"})},onSuccess:()=>{n.setQueryData(j(e,t),!i),"number"==typeof a&&n.setQueryData(Z(e),i?Math.max(0,a-1):Math.max(1,a+1))}})}(t,null==n?void 0:n.id);return(0,a.jsxs)(i.Z,{alignItems:"center","data-testid":"favorites",className:v.favoritesContainer,children:[w||R?(0,a.jsx)(s.C,{color:"secondary","data-testid":"userFavoriteLoadingTestId",className:v.favoritesLoadingIcon,size:16}):(0,a.jsx)(o.Z,{"aria-label":"favorite","data-testid":"userFavoriteIconTestId",role:"button",size:"large",className:v.favoritesButton,color:x?"inherit":"default",onClick:()=>T(),children:x?(0,a.jsx)(l.Uxw,{"data-testid":"userFavoriteIconOnTestId",className:v.favoritesButtonSvg}):(0,a.jsx)(l.Dfz,{"data-testid":"userFavoriteIconOffTestId",className:v.favoritesButtonSvg})}),"number"==typeof g&&(0,a.jsx)(r.Z,{color:x?"primary":"secondary",variant:m?"captionBody":"body1",className:v.favoritesCount,children:(0,c.V2)(g)})]})}},78268:function(e,t,n){n.d(t,{Z:function(){return ee}});var a,i,s=n(85893),o=n(67294),l=n(39977),r=n(44579),d=n(61555),c=n(53316),u=n(74279),p=n(30875),h=n(88643),m=n(31634),v=n(57417);(a=i||(i={}))[a.UpVote=0]="UpVote",a[a.DownVote=1]="DownVote",a[a.None=2]="None";var g=i,x=n(7308),b=n(60553),w=n(89306),f=n(69057),C=n(57140),y=n(59031);class j{static get(e){return fetch(e,{credentials:"include"})}static getWithNoCredentials(e){return fetch(e)}async post(e,t,n){let a={method:"post",body:t?JSON.stringify(t):null,credentials:"include",headers:new Headers({"Content-Type":"application/json; charset=utf-8"})};this.csrfToken&&a.headers.set("X-CSRF-TOKEN",this.csrfToken),n&&Object.keys(n).forEach(e=>{a.headers.set(e,n[e])});try{let t=await fetch(e,a);if(t.status===y.WC.FORBIDDEN){let n=t.headers.get("X-CSRF-TOKEN");if(n)return this.csrfToken=n,a.headers.set("X-CSRF-TOKEN",this.csrfToken),await fetch(e,a)}return t}catch(t){let e={status:y.WC.INTERNAL_SERVER_ERROR};if("string"!=typeof t)return Promise.resolve(new Response(null,e));return Promise.resolve(new Response(t,e))}}constructor(){this.csrfToken=null}}var Z=new j,k=n(97909);class I{getPostVoteUrl(e,t){let n=new URLSearchParams({vote:String(t)}),a="".concat("/vote/asset","/").concat(e,"?").concat(n.toString());return this.getFullUrl(a)}getFullUrl(e){return"".concat(this.basePath).concat(e)}async postVote(e,t){let n;let a=this.getPostVoteUrl(e,t),i=await this.Fetch.post(a,null,null);if(i.status!==y.WC.OK)return{status:i.status,body:null};try{n=await i.json()}catch(e){return{status:y.WC.INTERNAL_SERVER_ERROR,body:null}}return{status:i.status,body:n}}constructor(e=(0,k.NG)("voting-api")){this.Fetch=Z,this.basePath=e}}var T=new I,R=n(5050),S=n(19118),N=n(88049),L=n(35475),D=n(82013),M=n(86879),U=n(8537),F=n(41664),B=n.n(F),A=n(37483),P=e=>{let{open:t,setOpen:n}=e,{translate:a}=(0,u.$G)(),i=(0,o.useCallback)(()=>{n(!1)},[n]);return(0,s.jsxs)(S.Z,{open:t,onClose:i,children:[(0,s.jsx)(N.Z,{children:a("Heading.VerifyEmail")}),(0,s.jsx)(L.Z,{dividers:!0,children:(0,s.jsx)(D.D,{children:a("Label.VerifyEmailVoting")})}),(0,s.jsxs)(M.Z,{children:[(0,s.jsx)(B(),{href:A.Z.getAccountSettingsUrl(!0),passHref:!0,children:(0,s.jsx)(U.Z,{variant:"contained",onClick:i,children:a("Action.Verify")})}),(0,s.jsx)(U.Z,{variant:"outlined",color:"primary",onClick:i,children:a("Action.Cancel")})]})]})},E=n(23620),V=n(3153),W=e=>{let{open:t,setOpen:n}=e,{translate:a}=(0,u.$G)();return(0,s.jsx)(E.S,{autoHide:!0,anchorOrigin:{horizontal:"center",vertical:"top"},open:t,onClose:()=>n(!1),children:(0,s.jsx)(V.A,{variant:"filled",severity:"error",children:a("Response.RatingProcessingError")})})},z=n(26170),H=n(54790);let G=(0,z.Z)()((e,t)=>{let{isWebViewAvailable:n,ratingSelected:a}=t,i=n?e.palette.content.muted:e.palette.content.standard,s=a===g.UpVote?H.dd[60]:e.palette.content.disabled,o=a===g.DownVote?H.in[50]:e.palette.content.disabled,l=a===g.UpVote?e.palette.content.alert.active:i,r=a===g.DownVote?e.palette.actionV2.important.fill:i,d={"&:hover":{backgroundColor:e.palette.content.muted,cursor:"pointer"},border:"1px solid ".concat(e.palette.divider),borderRadius:4,color:"white",padding:6,svg:{height:16,width:16}};return{baseRating:{},leftRating:{color:l,marginRight:4,padding:4,width:"auto",...n&&{...d,backgroundColor:s}},ratingsContainer:{display:"flex",width:"min-content"},rightRating:{color:r,padding:4,width:"auto",...n&&{...d,backgroundColor:o}}}});var _=e=>{let{asset:t,showRatingTitle:n,ratingSelected:a,handleRatingSelected:i}=e,{translate:d}=(0,u.$G)(),{user:c,login:p}=(0,h.je)(),{id:m}=t,{isWebViewAvailable:x}=(0,b.ZF)(),{classes:w}=G({isWebViewAvailable:x,ratingSelected:a}),[j,Z]=o.useState(!1),[k,I]=o.useState(!1),S=(null==c?void 0:c.id)!==void 0,N=(0,o.useCallback)(async(e,t,n)=>{let a=await T.postVote(e,t);if(a.status!==y.WC.OK||null===a.body)I(!0);else{var s;let e=a.body;e.success?i(n):(null===(s=e.model)||void 0===s?void 0:s.reasonForNotVoteable)==="EmailIsVerified"?Z(!0):I(!0)}},[i]),L=(0,o.useCallback)(async e=>{let t,n;if(!S){p();return}a===e?(t=g.None,n=null):e===g.UpVote?(t=g.UpVote,n=!0):(t=g.DownVote,n=!1),void 0!==m&&N(m,n,t)},[m,N,S,p,a]),D=(0,l.Z)(e=>e.breakpoints.down(v.wt)),M=(0,s.jsxs)(r.Z,{container:!0,direction:"row","data-testid":"ratingButtonsTestId",justifyContent:D?"flex-end":"flex-start",wrap:"nowrap",className:w.ratingsContainer,children:[(0,s.jsx)(P,{open:j,setOpen:Z}),(0,s.jsx)(W,{open:k,setOpen:I}),(0,s.jsx)(f.Z,{color:"secondary",className:w.leftRating,"data-testid":"ratingUpButtonTestId","aria-label":"Thumbs up",onClick:()=>L(g.UpVote),size:"large",children:(0,s.jsx)(C.$TJ,{fontSize:"small"})}),(0,s.jsx)(f.Z,{color:"secondary",className:w.rightRating,"data-testid":"ratingDownButtonTestId","aria-label":"Thumbs down",onClick:()=>L(g.DownVote),size:"large",children:(0,s.jsx)(C.SJr,{fontSize:"small"})})]});return(0,s.jsx)(o.Fragment,{children:n?(0,s.jsx)(R.Z,{title:d("Label.Rating"),body:M}):M})},O=n(78627),$=n(434),Y=n(57756),K=n(51972),q=n(53717);let X=(0,z.Z)()(e=>({loadingContainer:{height:"100%"},reviewAssetContainer:{[e.breakpoints.up(v.wt)]:{height:327,margin:"auto",width:600},[e.breakpoints.down(v.wt)]:{}},reviewAssetHeaderContainer:{[e.breakpoints.up(v.wt)]:{marginBottom:32},[e.breakpoints.down(v.wt)]:{marginBottom:16}},reviewFormButtonsContainer:{justifyContent:"right",paddingRight:24}}));var Q=e=>{var t;let{asset:n,ratingSelected:a,openCreateModal:i,handleSetLocalUserReview:l,handleRatingSelected:c,handleCloseCreateModal:p}=e,h=(0,o.useRef)(!0),{classes:m}=X(),{createReview:v,loading:g}=(0,x.IV)(),{setMessageAndSeverity:w}=(0,$.Ds)(),{translate:f}=(0,u.$G)(),{isWebViewAvailable:C}=(0,b.ZF)(),[y,j]=(0,o.useState)(""),[Z,k]=(0,o.useState)(!1),I=null==n?void 0:n.id,T=null!==(t=null==n?void 0:n.name)&&void 0!==t?t:"";(0,o.useEffect)(()=>()=>{h.current=!1},[]);let R=(0,o.useCallback)(()=>{j(""),p()},[p]),N=(0,o.useCallback)(e=>{e.preventDefault(),j(e.target.value),Z&&k(!1)},[Z]),D=(0,o.useCallback)(async()=>{var e,t;if(void 0===I||0===y.trim().length){R();return}let n=await v(I,y,null),a=null!==(t=null==n?void 0:null===(e=n.error)||void 0===e?void 0:e.errorType)&&void 0!==t?t:null;null===n||a?(a===Y.ju.InappropriateContent&&k(!0),w({severity:"error",translatedMessage:f((0,q.Z)(a)),translatedTitle:f("Message.ReviewNotSubmitted",{assetName:T})})):(w({severity:"success",translatedMessage:f("Message.ReviewDisplayDisclaimer"),translatedTitle:f("Message.ReviewSubmitted",{assetName:T})}),n.comment&&l(n.comment),R())},[I,y,v,R,w,f,T,l]);return(0,s.jsxs)(S.Z,{fullWidth:!0,maxWidth:"Medium","data-testid":"assetReviewCreateModalTestId",open:i,onClose:R,children:[(0,s.jsx)(L.Z,{className:m.reviewAssetContainer,children:g?(0,s.jsx)(r.Z,{container:!0,className:m.loadingContainer,children:(0,s.jsx)(K.Z,{})}):(0,s.jsxs)(o.Fragment,{children:[(0,s.jsxs)(r.Z,{container:!0,direction:"column",className:m.reviewAssetHeaderContainer,children:[(0,s.jsx)(d.Z,{variant:"h6",children:f("Label.ReviewAsset")}),(0,s.jsx)(_,{asset:n,showRatingTitle:!1,ratingSelected:a,handleRatingSelected:c})]}),(0,s.jsx)(O.Z,{fullWidth:!0,multiline:!0,id:"assetReviewTextField",variant:"outlined",rows:6,inputProps:{maxLength:x.xU},label:f("Label.LeaveFeedback"),helperText:f("Label.RemainingLength",{currentLength:y.length.toString(),maxLength:x.xU.toString()}),onChange:N,value:y,InputLabelProps:C?{shrink:!0}:{}})]})}),(0,s.jsxs)(M.Z,{className:m.reviewFormButtonsContainer,children:[(0,s.jsx)(U.Z,{variant:"outlined",onClick:R,children:f("Action.Close")}),(0,s.jsx)(U.Z,{disabled:g||Z,variant:"contained",onClick:D,children:f("Action.Save")})]})]})};let J=(0,z.Z)()(e=>({assetVotingReviewContainer:{display:"flex",gap:4}}));var ee=e=>{var t,n;let{asset:a,toolboxFiatProduct:i,userReviewExists:f,handleSetLocalUserReview:C}=e,y=null!==(t=null==a?void 0:a.id)&&void 0!==t?t:0,j=null!==(n=null==a?void 0:a.typeId)&&void 0!==n?n:0,Z=j===c.a9.Plugin,k=!1===(0,w.Z)(i)&&!Z,[I,T]=(0,o.useState)(!1),[R,S]=(0,o.useState)(g.None),{user:N}=(0,h.je)(),{getUserVote:L}=(0,m.j0)(),{userReviewLoading:D}=(0,x.E4)(y),{userIsCreator:M,userIsCreatorLoading:U}=(0,x.zT)(y,j),{isOwned:F}=(0,p.m6)(y),{translate:B}=(0,u.$G)(),{isWebViewAvailable:A}=(0,b.ZF)(),{classes:P}=J(),E=(F||A&&k)&&!D&&!f&&!U&&!1===M,V=!A&&E&&F,W=(0,l.Z)(e=>e.breakpoints.down(v.wt));(0,o.useEffect)(()=>{(async()=>{y&&j&&null!==N&&R===g.None&&L(y,(0,c.jN)(j)).then(e=>{null!=e&&S(e?g.UpVote:g.DownVote)})})()},[N,y,L,R,j]);let z=(0,o.useCallback)(e=>{S(e),!1===I&&V&&T(!0)},[I,V]),H=(0,o.useCallback)(()=>{T(!1)},[T]),G=(0,o.useMemo)(()=>(0,s.jsx)(Q,{asset:a,handleCloseCreateModal:H,handleRatingSelected:z,openCreateModal:I,ratingSelected:R,handleSetLocalUserReview:C}),[a,H,z,C,I,R]),O=(0,o.useMemo)(()=>(0,s.jsx)(_,{asset:a,ratingSelected:R,showRatingTitle:!1,handleRatingSelected:z}),[a,z,R]);return E?(0,s.jsxs)(o.Fragment,{children:[W?O:(0,s.jsxs)(r.Z,{container:!0,direction:"column",className:P.assetVotingReviewContainer,children:[(0,s.jsx)(d.Z,{variant:"h5",children:B("Label.ReviewAsset")}),O]}),G]}):null}},73277:function(e,t,n){n.d(t,{$H:function(){return o},PW:function(){return u},Q:function(){return s},Qr:function(){return a},WQ:function(){return l},Y7:function(){return c},p5:function(){return d},xG:function(){return i},xL:function(){return r}});let a=200,i=200,s=70,o=24,l=360,r=250,d=16/9,c=12,u=250},53717:function(e,t,n){var a=n(57756);t.Z=e=>e===a.ju.InappropriateContent?"Label.ContainsInappropriateContent":"Label.PleaseTryAgain"},10883:function(e,t,n){n.d(t,{Z:function(){return e3}});var a,i,s=n(85893),o=n(67294),l=n(11163),r=n(59031),d=n(87562),c=n(39977),u=n(44579),p=n(7308),h=n(97909),m=n(9008),v=n.n(m),g=n(20415),x=n(57417),b=n(60553),w=n(73694),f=n(26170);let C=(0,f.Z)()((e,t)=>{let{isWebViewAvailable:n}=t;return{container:{height:"100%",padding:"0 64px",[e.breakpoints.down("XLarge")]:{padding:"0 12px"},[e.breakpoints.down(x.wt)]:{padding:0,...n&&{paddingBottom:48,paddingRight:8}}},loadingContainer:{minHeight:200}}});var y=n(3153),j=n(61555),Z=n(7414),k=n(57140),I=n(31162),T=n(63411),R=n(74279),S=n(51532),N=n(48288),L=n(173),D=n(39853),M=n(23887),U=n(76603),F=n(2948),B=n(34420),A=n(90590),P=n(32489),E=n(73277);let V=(0,f.Z)()((e,t)=>{let n=t.isAudio?E.Qr:E.WQ,a="calc(100% - ".concat(n+E.$H,"px)");return{additionalDetailsContainer:{backgroundColor:e.palette.surface[300],borderRadius:8,gap:8,marginBottom:28,paddingBottom:12,paddingLeft:16,paddingTop:12},audioContainer:{alignItems:"center",backgroundColor:e.palette.surface[300],borderRadius:8,display:"flex",height:75,marginBottom:32,padding:"0 24px 0 16px",[e.breakpoints.down(x.wt)]:{marginBottom:x.Wk}},descriptionTitle:{marginBottom:8},hasScriptsContainer:{width:"auto"},hasScriptsIcon:{marginRight:10},infoContainer:{height:"auto",maxWidth:2e3,[e.breakpoints.up("Large")]:{maxWidth:a},[e.breakpoints.down(x.wt)]:{maxWidth:"100%"}},lastUpdated:{marginLeft:30},overallDetailsContainer:{[e.breakpoints.up(x.wt)]:{"& > *":{paddingRight:8},marginBottom:24},[e.breakpoints.down(x.wt)]:{marginBottom:12}},packageIcon:{marginRight:14},reviewCount:{cursor:"pointer",textDecoration:"underline"},unavailableAudioContainer:{[e.breakpoints.up(x.wt)]:{marginBottom:32},[e.breakpoints.down(x.wt)]:{marginBottom:x.Wk}},webViewKeyDetailsAndInfoContainer:{marginBottom:24}}});var W=n(5050),z=n(49287),H=n(31055),G=n(30251),_=n(4913);let O=(0,f.Z)()(e=>({linkText:{color:e.palette.content.standard,textDecoration:"none","&:hover":{textDecoration:"underline"},width:"fit-content",maxWidth:"100%",display:"block",overflow:"hidden",textOverflow:"ellipsis"}}));var $=e=>{let{onLinkClicked:t,children:n}=e,a=/(https?:\/\/)?(?:www\.)?([a-z0-9-]{2,}\.)*(((m|de|www|web|api|blog|create|wiki|corp|polls|bloxcon|developer|devforum|forum|status)\.roblox\.com|robloxlabs\.com)|(www\.shoproblox\.com)|(roblox\.status\.io)|(rblx\.co)|help\.roblox\.com(?![A-Za-z0-9/.]*\/attachments\/))(?!\/[A-Za-z0-9-+&@#=~_|!:,.;]*%)((\/[A-Za-z0-9-+&@#/%?=~_|!:,.;]*)|(?=\s|\b))/m,{classes:i}=O(),o={validate:{url:e=>a.test(e),email:e=>!1},defaultProtocol:"https",target:{url:"_blank"},rel:{url:"ugc"},className:i.linkText,attributes:{onClick:t},ignoreTags:["script","style"],formatHref(e,t){let n=e;return"url"===t&&e.length>=7&&"http://"===e.substring(0,7)&&(n=n.replace("http://","https://")),n}};return(0,s.jsx)(_.Z,{options:o,children:n})},Y=n(31634),K=n(46938);let q=(0,f.Z)()((e,t)=>{let{isWebViewAvailable:n}=t;return{descriptionBody:{color:n?e.palette.content.standard:e.palette.action.disabled,marginBottom:24,overflowWrap:"break-word",whiteSpace:"pre-line",width:"100%",[e.breakpoints.down(x.wt)]:{marginBottom:n?0:x.Wk}}}});var X=n(37662),Q=n(76647);let J=(0,f.Z)()(e=>({codeSummaryContainer:{backgroundColor:e.palette.surface[300],borderRadius:8,marginTop:16,padding:"8px 16px"}}));var ee=e=>{var t;let{asset:n}=e,{classes:a}=J(),{translate:i}=(0,R.$G)(),{locale:o}=(0,R.ql)(),{codeSummary:l}=(0,X.X$)(null!==(t=null==n?void 0:n.id)&&void 0!==t?t:0,Q.uN.AssetInfo,null!=o?o:R.go.English);return l?(0,s.jsxs)(u.Z,{container:!0,"data-testid":"codeSummaryTestId",direction:"column",className:a.codeSummaryContainer,gap:2,children:[(0,s.jsx)(j.Z,{children:l}),(0,s.jsx)(j.Z,{variant:"subtitle2",children:i("Description.CodeUnderstandingDisclaimer")})]}):null},et=e=>{let{asset:t}=e,{isWebViewAvailable:n}=(0,b.ZF)(),{classes:a}=q({isWebViewAvailable:n}),{assetSearchResultSourceMap:i,searchUuid:l}=(0,Y.j0)(),{frontendFlags:r}=(0,B.YV)(),{sendEvent:d}=(0,D.Z)(),{description:c}=t,{experimentParamResult:u}=(0,K.PL)("StudioMarketplace","MarketplaceModelsCodeUnderstanding","MarketplaceModelsCodeUnderstandingEnabled"),p=(0,o.useMemo)(()=>u,[u]),h=r[F.Wu.FrontendFlagCodeUnderstanding]&&p;return(0,s.jsxs)(o.Fragment,{children:[(0,s.jsx)($,{onLinkClicked:e=>{var n,a,s;d(M.B_.AssetDescriptionLinkClicked,{assetId:null!==(n=t.id)&&void 0!==n?n:0,searchId:null!=l?l:"",searchResultSource:null!==(s=i.get(null!==(a=t.id)&&void 0!==a?a:0))&&void 0!==s?s:"",url:e.target.href})},children:(0,s.jsx)(j.Z,{"data-testid":"assetDescriptionTestId",className:a.descriptionBody,variant:n?"captionBody":"body1",children:c})}),(null==t?void 0:t.hasScripts)&&h&&(0,s.jsx)(ee,{asset:t})]})};let en=(0,f.Z)()(()=>({infoDetailsContainer:{height:"auto",width:"100%"},tabs:{"& Button":{textTransform:"none",marginRight:80}}}));var ea=n(10476);let ei=(0,f.Z)()(()=>({}));var es=n(76172);let eo=(0,f.Z)()(()=>({rowContainer:{margin:"8px 0",width:"100%"}})),el=e=>{let t,{detailKey:n,detailValue:a,showDivider:i=!0}=e,{classes:l}=eo(),r=(0,c.Z)(e=>e.breakpoints.down(x.wt)),{isWebViewAvailable:d}=(0,b.ZF)();return t=d?"captionBody":r?"body2":"body1",(0,s.jsxs)(o.Fragment,{children:[r&&i&&(0,s.jsx)(es.Z,{}),(0,s.jsxs)(u.Z,{container:!0,className:l.rowContainer,alignItems:"center",justifyContent:"space-between",direction:"row","data-testid":"technical-detail-row-".concat(null==n?void 0:n.toLowerCase().replace(/\s+/g,"-")),children:[(0,s.jsx)(j.Z,{color:"secondary",component:"h3",variant:t,children:n}),"string"==typeof a?(0,s.jsx)(j.Z,{variant:t,children:a}):a]})]})};el.displayName="TechnicalDetailRow";let er=e=>{var t,n,a,i,l,r,d,p,h,m,v,g,w,f,C,y,Z,k,I,T,S,N,L,D,M,U,F,B,A,P,E,V,W,z,H,G,_,O,$,Y,K,q,X,Q,J,ee,et,en,es;let{asset:eo}=e,{translate:er}=(0,R.$G)(),{classes:ed}=ei(),{isWebViewAvailable:ec}=(0,b.ZF)(),eu=(0,c.Z)(e=>e.breakpoints.down(x.wt)),ep=(0,ea.ZP)(eo.typeId),eh=[{keyLabel:"Label.Type",value:er(ep),shouldDisplay:(!!eu||ec)&&!!ep},{keyLabel:"Label.ContainsScripts",value:null!==(K=eo.hasScripts)&&void 0!==K&&K?er("Label.Yes"):er("Label.No"),shouldDisplay:!!eu&&!ec},{keyLabel:"Label.TriangleCount",value:null!==(q=null==eo?void 0:null===(a=eo.modelTechnicalDetails)||void 0===a?void 0:null===(n=a.objectMeshSummary)||void 0===n?void 0:null===(t=n.triangles)||void 0===t?void 0:t.toString())&&void 0!==q?q:"0",shouldDisplay:!!(null==eo?void 0:null===(l=eo.modelTechnicalDetails)||void 0===l?void 0:null===(i=l.objectMeshSummary)||void 0===i?void 0:i.triangles)&&eo.modelTechnicalDetails.objectMeshSummary.triangles>0},{keyLabel:"Label.VerticesCount",value:null!==(X=null==eo?void 0:null===(p=eo.modelTechnicalDetails)||void 0===p?void 0:null===(d=p.objectMeshSummary)||void 0===d?void 0:null===(r=d.vertices)||void 0===r?void 0:r.toString())&&void 0!==X?X:"0",shouldDisplay:!!(null==eo?void 0:null===(m=eo.modelTechnicalDetails)||void 0===m?void 0:null===(h=m.objectMeshSummary)||void 0===h?void 0:h.vertices)&&eo.modelTechnicalDetails.objectMeshSummary.vertices>0},{keyLabel:"Label.ScriptCount",value:null!==(Q=null==eo?void 0:null===(w=eo.modelTechnicalDetails)||void 0===w?void 0:null===(g=w.instanceCounts)||void 0===g?void 0:null===(v=g.script)||void 0===v?void 0:v.toString())&&void 0!==Q?Q:"0",shouldDisplay:!!(null==eo?void 0:null===(C=eo.modelTechnicalDetails)||void 0===C?void 0:null===(f=C.instanceCounts)||void 0===f?void 0:f.script)&&eo.modelTechnicalDetails.instanceCounts.script>0},{keyLabel:"Label.MeshPartCount",value:null!==(J=null==eo?void 0:null===(k=eo.modelTechnicalDetails)||void 0===k?void 0:null===(Z=k.instanceCounts)||void 0===Z?void 0:null===(y=Z.meshPart)||void 0===y?void 0:y.toString())&&void 0!==J?J:"0",shouldDisplay:!!(null==eo?void 0:null===(T=eo.modelTechnicalDetails)||void 0===T?void 0:null===(I=T.instanceCounts)||void 0===I?void 0:I.meshPart)&&eo.modelTechnicalDetails.instanceCounts.meshPart>0},{keyLabel:"Label.AnimationCount",value:null!==(ee=null==eo?void 0:null===(L=eo.modelTechnicalDetails)||void 0===L?void 0:null===(N=L.instanceCounts)||void 0===N?void 0:null===(S=N.animation)||void 0===S?void 0:S.toString())&&void 0!==ee?ee:"0",shouldDisplay:!!(null==eo?void 0:null===(M=eo.modelTechnicalDetails)||void 0===M?void 0:null===(D=M.instanceCounts)||void 0===D?void 0:D.animation)&&eo.modelTechnicalDetails.instanceCounts.animation>0},{keyLabel:"Label.DecalCount",value:null!==(et=null==eo?void 0:null===(B=eo.modelTechnicalDetails)||void 0===B?void 0:null===(F=B.instanceCounts)||void 0===F?void 0:null===(U=F.decal)||void 0===U?void 0:U.toString())&&void 0!==et?et:"0",shouldDisplay:!!(null==eo?void 0:null===(P=eo.modelTechnicalDetails)||void 0===P?void 0:null===(A=P.instanceCounts)||void 0===A?void 0:A.decal)&&eo.modelTechnicalDetails.instanceCounts.decal>0},{keyLabel:"Label.AudioInstanceCount",value:null!==(en=null==eo?void 0:null===(W=eo.modelTechnicalDetails)||void 0===W?void 0:null===(V=W.instanceCounts)||void 0===V?void 0:null===(E=V.audio)||void 0===E?void 0:E.toString())&&void 0!==en?en:"0",shouldDisplay:!!(null==eo?void 0:null===(H=eo.modelTechnicalDetails)||void 0===H?void 0:null===(z=H.instanceCounts)||void 0===z?void 0:z.audio)&&eo.modelTechnicalDetails.instanceCounts.audio>0},{keyLabel:"Label.ToolCount",value:null!==(es=null==eo?void 0:null===(O=eo.modelTechnicalDetails)||void 0===O?void 0:null===(_=O.instanceCounts)||void 0===_?void 0:null===(G=_.tool)||void 0===G?void 0:G.toString())&&void 0!==es?es:"0",shouldDisplay:!!(null==eo?void 0:null===(Y=eo.modelTechnicalDetails)||void 0===Y?void 0:null===($=Y.instanceCounts)||void 0===$?void 0:$.tool)&&eo.modelTechnicalDetails.instanceCounts.tool>0}].filter(e=>e.shouldDisplay);return 0!==eh.length||ec?(0,s.jsx)(u.Z,{container:!0,direction:"column",children:eh.map((e,t)=>{var n;return(0,s.jsx)(o.Fragment,{children:(0,s.jsx)(el,{detailKey:er(e.keyLabel),detailValue:null===(n=e.value)||void 0===n?void 0:n.toString(),showDivider:0!==t},e.keyLabel)},e.keyLabel)})}):(0,s.jsx)(j.Z,{color:"secondary",align:"center",variant:"body2",children:er("Message.NoTechnicalDetailsAvailable")})};er.displayName="TechnicalDetails",(a=i||(i={}))[a.DESCRIPTION=0]="DESCRIPTION",a[a.TECHNICAL_DETAILS=1]="TECHNICAL_DETAILS",a[a.REVIEWS=2]="REVIEWS";var ed=e=>{let{asset:t,toolboxFiatProduct:n,userReview:a,handleClickSeeMoreReviews:i,handleSetLocalUserReview:l}=e,{classes:r}=en(),{translate:d}=(0,R.$G)(),{frontendFlags:c}=(0,B.YV)(),p=c[F.Wu.FrontendFlagTechnicalDetails],[h,m]=(0,o.useState)(0),v=(0,o.useCallback)((e,t)=>{m(t)},[]);return(0,s.jsxs)(u.Z,{container:!0,direction:"column","data-testid":"assetInfoDetailsTestId",rowSpacing:2,className:r.infoDetailsContainer,children:[(0,s.jsx)(u.Z,{item:!0,children:(0,s.jsxs)(z.Z,{orientation:"horizontal",onChange:v,value:h,scrollButtons:!1,className:r.tabs,children:[(0,s.jsx)(H.Z,{label:d("Label.Description"),component:"h2",value:0}),p&&(0,s.jsx)(H.Z,{label:d("Label.TechnicalDetails"),component:"h2",value:1}),(0,s.jsx)(H.Z,{label:d("Label.Reviews"),component:"h2",value:2})]})}),(0,s.jsxs)(u.Z,{item:!0,children:[0===h&&(0,s.jsx)(et,{asset:t}),2===h&&(0,s.jsx)(G.Z,{asset:t,toolboxFiatProduct:n,isFullPageView:!1,userReview:a,handleClickSeeMoreReviews:i,handleSetLocalUserReview:l}),p&&1===h&&(0,s.jsx)(u.Z,{item:!0,XSmall:6,children:(0,s.jsx)(er,{asset:t})})]})]})},ec=n(16678),eu=n(65849),ep=n(37483),eh=n(63545),em=n(53316),ev=n(5626),eg=n(20247),ex=n(55575);let eb=(0,f.Z)()((e,t)=>{let{isWebViewAvailable:n}=t;return{assetGrid:{marginTop:12,width:"100%",[e.breakpoints.down(x.wt)]:{marginBottom:24}},moreFromHeading:{lineHeight:"100%"},moreFromSection:{marginTop:12},seeAllText:{display:"block"}}});var ew=e=>{var t;let{creator:n,asset:a}=e,i=a.id,l=null==a?void 0:a.typeId,r=null!==(t=null==a?void 0:a.assetSubTypes)&&void 0!==t?t:[],{getNextPage:d,assetsMap:p}=(0,Y.j0)(),{translate:h}=(0,R.$G)(),{redirectToTargetUrl:m,removeImageFromQueryState:v}=(0,eh.bX)(),{isWebViewAvailable:g}=(0,b.ZF)(),{classes:w}=eb({isWebViewAvailable:g}),[f,C]=(0,o.useState)(!0);(0,o.useEffect)(()=>{let e=!0,t={assetType:l,includeOnlyVerifiedCreators:!0,limit:5,pageNumber:0};if(!(0,P.Z)(a.typeId))return C(!0),(async()=>{await d(t,null==n?void 0:n.name,n,i),e&&C(!1)})(),()=>{e=!1}},[a.typeId,l,n,i,d]);let y=ep.Z.getCreatorBrowseByAssetTypeUrl(n.name||"",n.type||T.xq.Invalid,l),j=(0,c.Z)(e=>e.breakpoints.down(x.wt)),Z=Array.from(p.entries(),e=>{let[t,n]=e;return{name:t,value:n}});return!f&&p.size>0?(0,s.jsxs)(u.Z,{container:!0,direction:"row",className:w.moreFromSection,children:[(0,s.jsx)(ex.Z,{displayName:"".concat(h("Label.MoreFrom")," ").concat(null==n?void 0:n.name),enableSeeAll:!0,handleClickSeeAll:()=>{v(),m(y)}}),j&&l!==em.a9.FontFamily?(0,s.jsx)(ev.Z,{containsAssetTiles:!0,children:Z.map((e,t)=>{var n,a,i;return(0,s.jsx)(u.Z,{"data-testid":"assetTileTestId".concat((null===(n=e.value.asset)||void 0===n?void 0:n.id)||0),children:(0,s.jsx)(eg.Z,{asset:null!==(i=e.value.asset)&&void 0!==i?i:null,assetDetails:e.value,pagePosition:t,source:M.At.OnHoverBrowse})},(null===(a=e.value.asset)||void 0===a?void 0:a.id)||t)})}):(0,s.jsx)(u.Z,{className:w.assetGrid,children:(0,s.jsx)(eu.Z,{assetType:l,assetSubtypes:r,data:p,isLoading:f,source:M.At.OnHoverMoreFrom,parentAssetId:i})})]}):null},ef=n(65016),eC=n(70554),ey=n(78268);let ej=(0,f.Z)()(e=>({codeIcon:{height:20,marginRight:4,width:20},container:{backgroundColor:e.palette.surface[400],borderRadius:4,color:e.palette.content.standard,gap:4,padding:"8px 10px"}})),eZ=(0,f.Z)()(()=>({container:{gap:4,margin:"4px 0",minHeight:28},text:{fontSize:14,overflow:"hidden",textOverflow:"ellipsis"}}));var ek=e=>{let{leftChild:t,rightChild:n,showTopDivider:a}=e,{classes:i}=eZ(),l=e=>"string"==typeof e?(0,s.jsx)(j.Z,{component:"h3",variant:"body1",className:i.text,children:e}):e;return(0,s.jsxs)(o.Fragment,{children:[a&&(0,s.jsx)(es.Z,{}),(0,s.jsxs)(u.Z,{container:!0,alignItems:"center",direction:"row",justifyContent:"space-between",wrap:"wrap",className:i.container,children:[l(t),n&&l(n)]})]})},eI=e=>{let{asset:t,toolboxFiatProduct:n,userReviewExists:a,voting:i,handleSetLocalUserReview:o}=e,{translate:l}=(0,R.$G)(),{classes:r}=ej(),{assetId:d,hasScripts:c,isPackage:p,isPlugin:h}=(0,w.Z)(null!=t?t:null);return(0,s.jsxs)(u.Z,{container:!0,"data-testid":"webViewKeyAssetDetails",direction:"column",className:r.container,children:[(null==i?void 0:i.showVotes)&&(0,s.jsx)(ek,{leftChild:(0,s.jsx)(ef.Z,{showRatingsCount:!0,voting:i}),rightChild:(0,s.jsx)(ey.Z,{asset:t,toolboxFiatProduct:n,userReviewExists:a,handleSetLocalUserReview:o})}),(0,s.jsx)(ek,{leftChild:l("Label.Favorites"),rightChild:(0,s.jsx)(eC.Z,{assetId:d}),showTopDivider:!0}),p&&(0,s.jsx)(ek,{leftChild:l("Label.Updateable"),showTopDivider:!0}),c&&!h&&(0,s.jsx)(ek,{leftChild:(0,s.jsxs)(u.Z,{container:!0,alignItems:"center",children:[(0,s.jsx)(k.EKh,{fontSize:"large",className:r.codeIcon}),(0,s.jsx)(j.Z,{variant:"captionBody",children:l("Label.ContainsScripts")})]}),showTopDivider:!0})]})},eT=n(76801),eR=e=>{var t,n;let a,{assetDetails:i,reviewsCount:l,userReview:r,handleClickSeeMoreReviews:d,handleSetLocalUserReview:p}=e,{asset:h,creator:m,voting:v,fiatProduct:g}=i,f=null==h?void 0:h.audioDetails,{assetId:C,assetType:E,audioCategoryTranslated:z,createdAt:H,isAudio:_,isFont:O,isPlugin:$,isSoundEffect:Y,length:K,updatedAt:q}=(0,w.Z)(null!=h?h:null),{sendEvent:X}=(0,D.Z)(),Q=(0,c.Z)(e=>e.breakpoints.down(x.wt)),{frontendFlags:J}=(0,B.YV)(),ee=(0,o.useCallback)(e=>{var t,n,a,i,s,o;X(e?M.B_.AudioPlayed:M.B_.AudioStopped,{artist:null!==(t=null==f?void 0:f.artist)&&void 0!==t?t:void 0,assetId:C,audioType:null!==(n=null==f?void 0:f.audioType)&&void 0!==n?n:void 0,musicAlbum:null!==(a=null==f?void 0:f.musicAlbum)&&void 0!==a?a:void 0,musicGenre:null!==(i=null==f?void 0:f.musicGenre)&&void 0!==i?i:void 0,soundEffectCategory:null!==(s=null==f?void 0:f.soundEffectCategory)&&void 0!==s?s:void 0,soundEffectSubcategory:null!==(o=null==f?void 0:f.soundEffectSubcategory)&&void 0!==o?o:void 0})},[X,null==f?void 0:f.artist,null==f?void 0:f.audioType,null==f?void 0:f.musicAlbum,null==f?void 0:f.musicGenre,null==f?void 0:f.soundEffectCategory,null==f?void 0:f.soundEffectSubcategory,C]),{translate:en}=(0,R.$G)(),[ea,ei]=(0,o.useState)(!1),{classes:es}=V({isAudio:_,isFont:O}),{data:eo}=(0,A.A)(C,{enabled:!0}),el=null==eo?void 0:eo.location,eu=null==eo?void 0:eo.format,ep=(0,o.useRef)();ep.current=ea;let eh=(0,o.useCallback)(()=>{ee(!ep.current),ei(e=>!e)},[ee]),em=(0,o.useCallback)(()=>{ee(!1),ei(!1)},[ee]),{isWebViewAvailable:ev}=(0,b.ZF)(),eg=J[F.Wu.FrontendFlagTechnicalDetails]&&!ev,ex=null!==(n=null==h?void 0:h.hasScripts)&&void 0!==n&&n,eb=null==h?void 0:null===(t=h.assetSubTypes)||void 0===t?void 0:t.includes(I.X9.Package),ef=!ev&&ex&&!$,eC=!ev&&eb,ey=ef||eC;a=ev?"captionBody":"body2";let ej=(0,o.useMemo)(()=>_&&el&&((0,S.Pt)(eu)?(0,s.jsxs)(u.Z,{className:es.audioContainer,children:[(0,s.jsx)(L.Z,{isPlaying:ea,onClick:eh}),(0,s.jsx)(N.Z,{audioFormat:eu,src:el,isPlaying:ea,showTimes:!0,onError:em,onEnded:em})]}):(0,s.jsx)(y.A,{className:es.unavailableAudioContainer,severity:"info",children:en("Error.AudioPreviewUnavailableOnBrowser")})),[eu,el,_,ea,eh,em,es,en]),eZ=(0,o.useMemo)(()=>(0,s.jsx)(W.Z,{title:en("Label.Type"),body:E}),[en,E]),ek=(0,o.useMemo)(()=>z&&(0,s.jsx)(W.Z,{title:Y?en("Label.Category"):en("Label.Genre"),body:z}),[z,Y,en]),eR=(0,o.useMemo)(()=>H&&(0,s.jsx)(W.Z,{title:en("Label.Created"),body:H}),[H,en]),eS=(0,o.useMemo)(()=>K&&(0,s.jsx)(W.Z,{title:en("Label.Length"),body:K}),[K,en]);return null!=h&&((0,P.Z)(h.typeId)||g)?Q?(0,s.jsxs)(u.Z,{container:!0,direction:"column",className:es.infoContainer,children:[ej,ev&&(0,s.jsxs)(u.Z,{container:!0,direction:"column",className:es.webViewKeyDetailsAndInfoContainer,children:[(0,s.jsx)(eI,{asset:h,toolboxFiatProduct:null!=g?g:null,userReviewExists:null!==r,voting:v,handleSetLocalUserReview:p}),(0,s.jsx)(eT.Z,{asset:h,creator:m,toolboxFiatProduct:null!=g?g:null})]}),(null==h?void 0:h.description)&&(0,s.jsx)(et,{asset:h}),(0,s.jsxs)(u.Z,{container:!0,direction:"column",className:es.overallDetailsContainer,children:[eC&&(0,s.jsx)(W.Z,{title:en("Label.Updateable"),body:en("Label.Yes")}),ef&&(0,s.jsx)(W.Z,{title:en("Label.ContainsScripts"),body:en("Label.Yes")}),!ev&&(0,s.jsx)(W.Z,{title:en("Label.Reviews"),body:(0,s.jsx)(j.Z,{onClick:d,className:es.reviewCount,variant:a,children:en("Label.ReviewsCount",{reviewsCount:l.toString()})}),showDivider:!eg}),ev&&(0,s.jsx)(W.Z,{title:en("Label.Creator"),body:(0,s.jsx)(o.Fragment,{children:m&&(0,s.jsx)(U.Z,{assetId:C,assetTypeId:h.typeId,creator:m,variant:"captionBody",color:"info",includeAtChar:!1})}),showDivider:!1}),!eg&&eZ,ek,eR,(0,s.jsx)(W.Z,{title:en("Label.Updated"),body:(0,s.jsxs)(o.Fragment,{children:[(0,s.jsx)(j.Z,{variant:a,children:q}),m&&m.type===T.xq.Group&&m.latestGroupUpdaterUserId&&m.latestGroupUpdaterUserName&&!Q&&(0,s.jsx)(U.Z,{displayAsAuthor:!0,creator:{id:m.latestGroupUpdaterUserId,isVerifiedCreator:m.isVerifiedCreator,name:m.latestGroupUpdaterUserName,type:T.xq.User},assetTypeId:h.typeId})]})}),eS]}),eg&&(0,s.jsxs)(o.Fragment,{children:[(0,s.jsx)(j.Z,{variant:"overline",className:es.descriptionTitle,children:en("Label.TechnicalDetails")}),(0,s.jsx)(er,{asset:h})]}),m&&h&&m.isVerifiedCreator&&(0,s.jsx)(ew,{creator:m,asset:h}),!ev&&(0,s.jsx)(G.Z,{asset:h,toolboxFiatProduct:null!=g?g:null,userReview:r,handleClickSeeMoreReviews:d,handleSetLocalUserReview:p,isFullPageView:!1})]}):(0,s.jsxs)(u.Z,{container:!0,direction:"row",justifyContent:"space-between",children:[(0,s.jsx)(ec.Z,{asset:h,creator:m}),(0,s.jsxs)(u.Z,{container:!0,direction:"column",className:es.infoContainer,children:[ej,ey&&(0,s.jsxs)(u.Z,{container:!0,alignItems:"start",direction:"column",flexDirection:"column",className:es.additionalDetailsContainer,children:[eC&&(0,s.jsxs)(u.Z,{children:[(0,s.jsxs)(u.Z,{container:!0,direction:"row",alignItems:"center",children:[(0,s.jsx)(Z.Z,{"data-testid":"packageIcon",fontSize:"small",className:es.packageIcon}),(0,s.jsx)(j.Z,{children:en("Label.Updateable")})]}),q&&(0,s.jsx)(j.Z,{color:"secondary",variant:"body2",className:es.lastUpdated,children:en("Label.LastUpdated",{date:q})})]}),ef&&(0,s.jsxs)(u.Z,{container:!0,direction:"row",alignItems:"center",className:es.hasScriptsContainer,children:[(0,s.jsx)(k.EKh,{"data-testid":"scriptIcon",className:es.hasScriptsIcon}),(0,s.jsx)(j.Z,{children:en("Label.ModelHasScripts")})]})]}),(0,s.jsxs)(u.Z,{container:!0,direction:"row",className:es.overallDetailsContainer,children:[!eg&&eZ,ek,eR,(0,s.jsx)(W.Z,{title:en("Label.Updated"),body:(0,s.jsxs)(o.Fragment,{children:[(0,s.jsx)(j.Z,{variant:"body1",children:q}),m&&m.type===T.xq.Group&&m.latestGroupUpdaterUserId&&m.latestGroupUpdaterUserName&&(0,s.jsx)(U.Z,{displayAsAuthor:!0,creator:{id:m.latestGroupUpdaterUserId,isVerifiedCreator:m.isVerifiedCreator,name:m.latestGroupUpdaterUserName,type:T.xq.User},assetTypeId:h.typeId})]})}),eS]}),(0,s.jsx)(o.Fragment,{children:(null==v?void 0:v.showVotes)?(0,s.jsx)(ed,{asset:h,toolboxFiatProduct:null!=g?g:null,userReview:r,handleClickSeeMoreReviews:d,handleSetLocalUserReview:p}):(0,s.jsxs)(u.Z,{container:!0,direction:"column",children:[(0,s.jsx)(j.Z,{variant:"overline",className:es.descriptionTitle,children:en("Label.Description")}),(0,s.jsx)(et,{asset:h})]})})]})]}):null},eS=n(63416),eN=n(92544);let eL=(0,f.Z)()(e=>({container:{[e.breakpoints.up(x.wt)]:{marginBottom:34,marginTop:28},[e.breakpoints.down(x.wt)]:{marginTop:x.Wk}},header:{[e.breakpoints.up(x.wt)]:{color:e.palette.content.muted},marginBottom:8}}));var eD=n(8537),eM=n(41664),eU=n.n(eM);let eF="".concat("/store/98c7cb0bd3335208ee38bcb142f56c627fe5ca24/assets","/icons/social_link_square_icons_v4.svg"),eB={[eN.Un.Discord]:0,[eN.Un.Youtube]:-64,[eN.Un.Twitter]:-128,[eN.Un.Twitch]:-192,[eN.Un.Facebook]:-256,[eN.Un.Github]:-320,[eN.Un.Roblox]:-448,[eN.Un.Devforum]:-448,[eN.Un.Guilded]:-704,[eN.Un.TryInExperience]:-448,[eN.Un.Invalid]:-448},eA={[eN.Un.Discord]:"Discord",[eN.Un.Youtube]:"YouTube",[eN.Un.Twitter]:"X",[eN.Un.Twitch]:"Twitch",[eN.Un.Facebook]:"Facebook",[eN.Un.Github]:"GitHub",[eN.Un.Roblox]:"Roblox",[eN.Un.Devforum]:"DevForum",[eN.Un.Guilded]:"Guilded",[eN.Un.TryInExperience]:"",[eN.Un.Invalid]:""},eP=/^(?:[#\s]*)$/,eE=/^(http:\/\/|https:\/\/)/,eV=/^@([a-zA-Z0-9_]{1,15})$/,eW=(0,f.Z)()((e,t)=>{let{linkType:n=eN.Un.Invalid}=t;return{button:{"&:hover":{backgroundColor:"transparent"},height:86,justifyContent:"flex-start",marginRight:4,paddingLeft:12,paddingRight:12,width:"100%"},icon:{backgroundImage:"url(".concat(eF,")"),backgroundPositionY:eB[n],marginRight:8,minHeight:64,minWidth:64},title:{display:"-webkit-box",maxHeight:64,overflow:"hidden",textAlign:"left",textOverflow:"ellipsis",WebkitBoxOrient:"vertical",WebkitLineClamp:2,wordBreak:"break-word"}}});var ez=e=>{let{assetId:t,socialLink:n}=e,{translate:a}=(0,R.$G)(),{frontendFlags:i}=(0,B.YV)(),{sendEvent:l}=(0,D.Z)(),{classes:r}=eW({linkType:n.linkType}),d=(0,o.useMemo)(()=>{if(!n.url)return"";let e=n.linkType===eN.Un.Twitter&&eV.test(n.url)?"x.com/".concat(n.url.slice(1)):n.url;return new URL(eE.test(e)?e:"".concat("https://").concat(e))},[n.linkType,n.url]),c=(0,o.useMemo)(()=>{if(i[F.Wu.FrontendFlagEnableSocialLinkCustomTitles]&&n.title&&!eP.test(n.title))return n.title;if(!n.linkType)throw Error("Invalid social link type");return n.linkType===eN.Un.Twitter?a("Label.XSocialLinkDisplayName"):eA[n.linkType]},[i,n.linkType,n.title,a]);return(0,s.jsxs)(eD.Z,{color:"secondary",component:eU(),className:r.button,"data-testid":"socialLinkTestId",href:d.toString(),onClick:e=>{if(e.preventDefault(),d instanceof URL){var a,i;window.open(d.href,"_blank");let e=c===n.title;l(M.B_.SocialLinkClickedEvent,{assetId:t,customTitle:e?c:void 0,linkType:null!==(i=null===(a=n.linkType)||void 0===a?void 0:a.valueOf())&&void 0!==i?i:0,url:d.href})}},variant:"outlined",children:[(0,s.jsx)("span",{className:r.icon}),(0,s.jsx)(j.Z,{className:r.title,children:c})]},n.url)},eH=e=>{let t,{assetId:n,socialLinks:a}=e,{translate:i}=(0,R.$G)(),{classes:o}=eL(),{isWebViewAvailable:l}=(0,b.ZF)(),r=(0,c.Z)(e=>e.breakpoints.down(x.wt));if(!a||0===a.length)return null;let d=null==a?void 0:a.filter(e=>e.linkType!==eN.Un.Invalid&&e.linkType!==eN.Un.TryInExperience&&null!==e.url&&void 0!==e.url&&""!==e.url).slice(0,3);return t=l?"h6":r?"h5":"largeLabel2",(0,s.jsxs)(u.Z,{container:!0,direction:"column","data-testid":"socialLinksContainerTestId",className:o.container,children:[(0,s.jsx)(j.Z,{variant:t,className:o.header,children:i("Label.SocialLinks")}),(0,s.jsx)(u.Z,{container:!0,direction:"row",spacing:2,children:d.map(e=>(0,s.jsx)(u.Z,{item:!0,XSmall:12,Medium:4,children:(0,s.jsx)(ez,{assetId:n,socialLink:e})},e.url))})]})},eG=e=>{var t,n;let{assetDetails:a,breadcrumbs:i,canonicalLink:l,keyword:r,pageNumber:m,pagePosition:f,asyncPurchaseSuccess:y,handleClickSeeMoreReviews:j}=e,{asset:Z,creator:k}=a,I=null!==(t=null==Z?void 0:Z.id)&&void 0!==t?t:0,T=null!==(n=null==Z?void 0:Z.name)&&void 0!==n?n:"",{socialLinks:R}=(0,w.Z)(Z),{setCurrentAssetName:S,setCurrentPageTitle:N}=(0,d.qt)(),{isWebViewAvailable:L}=(0,b.ZF)(),{reviewsCount:D}=(0,p.b2)(I),{userReview:M}=(0,p.E4)(I),{classes:U}=C({isWebViewAvailable:L}),F=(0,c.Z)(e=>e.breakpoints.down(x.wt)),[B,A]=(0,o.useState)(M),P=null===M&&null!==B?D+1:D,E=(0,o.useCallback)(e=>{A(e)},[]);return((0,o.useEffect)(()=>{S(T),N(T)},[T,S,N]),(0,o.useEffect)(()=>{null!==M&&A(M)},[Z,S,M]),null==Z)?null:(0,s.jsxs)(u.Z,{container:!0,direction:"column","data-testid":"itemDetailsTestId",className:U.container,children:[(0,s.jsx)(g.Z,{}),l&&(0,s.jsx)(v(),{children:(0,s.jsx)("link",{rel:"canonical",href:"".concat((0,h.KA)()).concat("/store").concat(l)})}),(0,s.jsx)(eS.Z,{assetDetails:a,asyncPurchaseSuccess:y,reviewsCount:P,breadcrumbs:i,keyword:r,pageNumber:m,pagePosition:f,handleClickSeeMoreReviews:j}),(0,s.jsxs)(u.Z,{container:!0,justifyContent:"space-between",children:[(0,s.jsx)(eR,{assetDetails:a,userReview:B,handleClickSeeMoreReviews:j,handleSetLocalUserReview:E,reviewsCount:P}),!L&&(0,s.jsx)(eH,{assetId:I,socialLinks:R}),!F&&k&&Z&&k.isVerifiedCreator&&(0,s.jsx)(ew,{creator:k,asset:Z})]})]})},e_=n(18218),eO=n(51972),e$=n(11049),eY=n(572),eK=n(28527),eq=n(88643),eX=n(9591),eQ=n(434),eJ=n(67603),e0=n(23888),e1=n(12373);let e2=e=>{if(void 0!==e&&"string"==typeof e){let t=parseInt(e,10);return Number.isNaN(t)?void 0:t}},e5=e=>{if(void 0!==e&&"string"==typeof e)return"true"===e},e4=e=>{let t=null==e?void 0:e.toString().split("/")[0],n=!!(t&&t.length>=1&&/^[0-9]+$/.test(t));return[t?Number(t):0,n]};var e3=()=>{var e,t,n;let a=(0,l.useRouter)(),{assetId:i,assetType:c}=a.query,[u,p]=e4(i),{allAssetsMap:h,getAssetDetails:m}=(0,Y.j0)(),{isFetched:v,user:g}=(0,eq.je)(),{setCurrentAssetName:x,setCurrentPageTitle:b,setCurrentPageDescription:w,setCategoryType:f}=(0,d.qt)(),{sendEvent:C}=(0,D.Z)(),{clearSnackbar:y}=(0,eQ.Ds)(),[j,Z]=(0,o.useState)(!0),[k,I]=(0,o.useState)(),[T,R]=(0,o.useState)(),[S,N]=(0,o.useState)(),[L,U]=(0,o.useState)(!1),[F,B]=(0,o.useState)(null),[A,P]=(0,o.useState)(!1),E=(0,o.useMemo)(()=>a.isReady?(0,eJ.Z)(a.asPath)[0]:void 0,[a.isReady,a.asPath]),V=(0,o.useMemo)(()=>g&&eX.IP.has(c)||A,[c,A,g]),W=null!==(e=h.current.get(u))&&void 0!==e?e:null,z=(0,o.useCallback)(()=>{let e=a.asPath.split("?")[0];a.push("".concat(e,"/reviews"))},[a]);(0,o.useEffect)(()=>{Z(!0)},[a.pathname]),(0,o.useEffect)(()=>{if(a.isReady){let{purchaseSuccess:e}=a.query,t=e5(e);void 0!==t?U(t):L&&(U(!1),y())}},[L,y,a.isReady,a.query]);let H=(0,o.useCallback)(async e=>{try{var t,n,i,s,o,l,r,d;let c=await m([u],!0);if(!e)return;let p=null!==(s=c.get(u))&&void 0!==s?s:null;if(null===p){P(!0),Z(!1);return}let h=null!==(o=null==p?void 0:null===(t=p.asset)||void 0===t?void 0:t.name)&&void 0!==o?o:"";x(h),b(h),w(null!==(l=null==p?void 0:null===(n=p.asset)||void 0===n?void 0:n.description)&&void 0!==l?l:"");let v=null==p?void 0:null===(i=p.asset)||void 0===i?void 0:i.typeId;v&&(0,eK.YO)(v)&&f(v);let{keyword:g,pageNumber:y,pagePosition:j,searchId:k,tab:T,viewFromStudio:S}=a.query,L="string"==typeof g?g:"",D=e2(y),U=e2(j),F=e5(S);if(void 0!==D&&R(D),void 0!==U&&N(U),void 0!==L&&I(L),F){let e=(null==p?void 0:null===(r=p.asset)||void 0===r?void 0:r.assetSubTypes)?null===(d=p.asset)||void 0===d?void 0:d.assetSubTypes.join(","):"";C(M.B_.ViewAssetFromStudio,{assetId:u,assetSubTypes:e,assetTypeId:null!=v?v:0,searchId:"string"==typeof k?k:"",searchKeyword:L})}let B=(0,e$.Z)(u,h),A=a.asPath.split("?")[1],E=A?"".concat(B,"?").concat(A):B;a.asPath!==E&&a.replace({pathname:B,search:A},void 0,{shallow:!0}),Z(!1)}catch(t){if(!e)return;P(!0),B(t),Z(!1)}},[m,u,x,b,w,a,f,C]),{data:G,error:_,loading:O}=(0,e0.Pm)(u,e1.vh,{enabled:V});if((0,o.useEffect)(()=>{let e=!0;return a.isReady&&!p&&Z(!1),a.isReady&&j&&null===F&&v&&p&&(V||H(e)),()=>{e=!1}},[c,v,H,F,V,j,p,a.isReady]),V?O:j)return(0,s.jsx)(eO.Z,{});if(!V&&F||_){let e=null!==(n=null===(t=(0,eY.Z)(F))||void 0===t?void 0:t.status)&&void 0!==n?n:r.WC.INTERNAL_SERVER_ERROR;return(0,s.jsx)(e_.Z,{assetId:u,errorCode:e})}let $=V?G:W;return p&&$?(0,s.jsx)(eG,{assetDetails:$,asyncPurchaseSuccess:L,canonicalLink:E,keyword:k,pageNumber:T,pagePosition:S,handleClickSeeMoreReviews:z}):(0,s.jsx)(e_.Z,{errorCode:r.WC.NOT_FOUND})}}}]);